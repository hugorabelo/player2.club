!function(e,t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?module.exports=t(require("jquery")):e.bootbox=t(e.jQuery)}(this,function e(t,n){"use strict";function o(e){var t=g[h.locale];return t?t[e]:g.en[e]}function i(e,n,o){e.stopPropagation(),e.preventDefault();var i=t.isFunction(o)&&o.call(n,e)===!1;i||n.modal("hide")}function r(e){var t,n=0;for(t in e)n++;return n}function a(e,n){var o=0;t.each(e,function(e,t){n(e,t,o++)})}function l(e){var n,o;if("object"!=typeof e)throw new Error("Please supply an object of options");if(!e.message)throw new Error("Please specify a message");return e=t.extend({},h,e),e.buttons||(e.buttons={}),n=e.buttons,o=r(n),a(n,function(e,i,r){if(t.isFunction(i)&&(i=n[e]={callback:i}),"object"!==t.type(i))throw new Error("button with key "+e+" must be an object");i.label||(i.label=e),i.className||(i.className=2>=o&&r===o-1?"btn-primary":"btn-default")}),e}function s(e,t){var n=e.length,o={};if(1>n||n>2)throw new Error("Invalid argument length");return 2===n||"string"==typeof e[0]?(o[t[0]]=e[0],o[t[1]]=e[1]):o=e[0],o}function d(e,n,o){return t.extend(!0,{},e,s(n,o))}function c(e,t,n,o){var i={className:"bootbox-"+e,buttons:u.apply(null,t)};return f(d(i,o,n),t)}function u(){for(var e={},t=0,n=arguments.length;n>t;t++){var i=arguments[t],r=i.toLowerCase(),a=i.toUpperCase();e[r]={label:o(a)}}return e}function f(e,t){var o={};return a(t,function(e,t){o[t]=!0}),a(e.buttons,function(e){if(o[e]===n)throw new Error("button key "+e+" is not allowed (options are "+t.join("\n")+")")}),e}var p={dialog:"<div class='bootbox modal' tabindex='-1' role='dialog'><div class='modal-dialog'><div class='modal-content'><div class='modal-body'><div class='bootbox-body'></div></div></div></div></div>",header:"<div class='modal-header'><h4 class='modal-title'></h4></div>",footer:"<div class='modal-footer'></div>",closeButton:"<button type='button' class='bootbox-close-button close' data-dismiss='modal' aria-hidden='true'>&times;</button>",form:"<form class='bootbox-form'></form>",inputs:{text:"<input class='bootbox-input bootbox-input-text form-control' autocomplete=off type=text />",textarea:"<textarea class='bootbox-input bootbox-input-textarea form-control'></textarea>",email:"<input class='bootbox-input bootbox-input-email form-control' autocomplete='off' type='email' />",select:"<select class='bootbox-input bootbox-input-select form-control'></select>",checkbox:"<div class='checkbox'><label><input class='bootbox-input bootbox-input-checkbox' type='checkbox' /></label></div>",date:"<input class='bootbox-input bootbox-input-date form-control' autocomplete=off type='date' />",time:"<input class='bootbox-input bootbox-input-time form-control' autocomplete=off type='time' />",number:"<input class='bootbox-input bootbox-input-number form-control' autocomplete=off type='number' />",password:"<input class='bootbox-input bootbox-input-password form-control' autocomplete='off' type='password' />"}},h={locale:"en",backdrop:"static",animate:!0,className:null,closeButton:!0,show:!0,container:"body"},m={};m.alert=function(){var e;if(e=c("alert",["ok"],["message","callback"],arguments),e.callback&&!t.isFunction(e.callback))throw new Error("alert requires callback property to be a function when provided");return e.buttons.ok.callback=e.onEscape=function(){return t.isFunction(e.callback)?e.callback.call(this):!0},m.dialog(e)},m.confirm=function(){var e;if(e=c("confirm",["cancel","confirm"],["message","callback"],arguments),e.buttons.cancel.callback=e.onEscape=function(){return e.callback.call(this,!1)},e.buttons.confirm.callback=function(){return e.callback.call(this,!0)},!t.isFunction(e.callback))throw new Error("confirm requires a callback");return m.dialog(e)},m.prompt=function(){var e,o,i,r,l,s,c;if(r=t(p.form),o={className:"bootbox-prompt",buttons:u("cancel","confirm"),value:"",inputType:"text"},e=f(d(o,arguments,["title","callback"]),["cancel","confirm"]),s=e.show===n?!0:e.show,e.message=r,e.buttons.cancel.callback=e.onEscape=function(){return e.callback.call(this,null)},e.buttons.confirm.callback=function(){var n;switch(e.inputType){case"text":case"textarea":case"email":case"select":case"date":case"time":case"number":case"password":n=l.val();break;case"checkbox":var o=l.find("input:checked");n=[],a(o,function(e,o){n.push(t(o).val())})}return e.callback.call(this,n)},e.show=!1,!e.title)throw new Error("prompt requires a title");if(!t.isFunction(e.callback))throw new Error("prompt requires a callback");if(!p.inputs[e.inputType])throw new Error("invalid prompt type");switch(l=t(p.inputs[e.inputType]),e.inputType){case"text":case"textarea":case"email":case"date":case"time":case"number":case"password":l.val(e.value);break;case"select":var h={};if(c=e.inputOptions||[],!t.isArray(c))throw new Error("Please pass an array of input options");if(!c.length)throw new Error("prompt with select requires options");a(c,function(e,o){var i=l;if(o.value===n||o.text===n)throw new Error("given options in wrong format");o.group&&(h[o.group]||(h[o.group]=t("<optgroup/>").attr("label",o.group)),i=h[o.group]),i.append("<option value='"+o.value+"'>"+o.text+"</option>")}),a(h,function(e,t){l.append(t)}),l.val(e.value);break;case"checkbox":var g=t.isArray(e.value)?e.value:[e.value];if(c=e.inputOptions||[],!c.length)throw new Error("prompt with checkbox requires options");if(!c[0].value||!c[0].text)throw new Error("given options in wrong format");l=t("<div/>"),a(c,function(n,o){var i=t(p.inputs[e.inputType]);i.find("input").attr("value",o.value),i.find("label").append(o.text),a(g,function(e,t){t===o.value&&i.find("input").prop("checked",!0)}),l.append(i)})}return e.placeholder&&l.attr("placeholder",e.placeholder),e.pattern&&l.attr("pattern",e.pattern),e.maxlength&&l.attr("maxlength",e.maxlength),r.append(l),r.on("submit",function(e){e.preventDefault(),e.stopPropagation(),i.find(".btn-primary").click()}),i=m.dialog(e),i.off("shown.bs.modal"),i.on("shown.bs.modal",function(){l.focus()}),s===!0&&i.modal("show"),i},m.dialog=function(e){e=l(e);var o=t(p.dialog),r=o.find(".modal-dialog"),s=o.find(".modal-body"),d=e.buttons,c="",u={onEscape:e.onEscape};if(t.fn.modal===n)throw new Error("$.fn.modal is not defined; please double check you have included the Bootstrap JavaScript library. See http://getbootstrap.com/javascript/ for more details.");if(a(d,function(e,t){c+="<button data-bb-handler='"+e+"' type='button' class='btn "+t.className+"'>"+t.label+"</button>",u[e]=t.callback}),s.find(".bootbox-body").html(e.message),e.animate===!0&&o.addClass("fade"),e.className&&o.addClass(e.className),"large"===e.size?r.addClass("modal-lg"):"small"===e.size&&r.addClass("modal-sm"),e.title&&s.before(p.header),e.closeButton){var f=t(p.closeButton);e.title?o.find(".modal-header").prepend(f):f.css("margin-top","-10px").prependTo(s)}return e.title&&o.find(".modal-title").html(e.title),c.length&&(s.after(p.footer),o.find(".modal-footer").html(c)),o.on("hidden.bs.modal",function(e){e.target===this&&o.remove()}),o.on("shown.bs.modal",function(){o.find(".btn-primary:first").focus()}),"static"!==e.backdrop&&o.on("click.dismiss.bs.modal",function(e){o.children(".modal-backdrop").length&&(e.currentTarget=o.children(".modal-backdrop").get(0)),e.target===e.currentTarget&&o.trigger("escape.close.bb")}),o.on("escape.close.bb",function(e){u.onEscape&&i(e,o,u.onEscape)}),o.on("click",".modal-footer button",function(e){var n=t(this).data("bb-handler");i(e,o,u[n])}),o.on("click",".bootbox-close-button",function(e){i(e,o,u.onEscape)}),o.on("keyup",function(e){27===e.which&&o.trigger("escape.close.bb")}),t(e.container).append(o),o.modal({backdrop:e.backdrop?"static":!1,keyboard:!1,show:!1}),e.show&&o.modal("show"),o},m.setDefaults=function(){var e={};2===arguments.length?e[arguments[0]]=arguments[1]:e=arguments[0],t.extend(h,e)},m.hideAll=function(){return t(".bootbox").modal("hide"),m};var g={bg_BG:{OK:"Ок",CANCEL:"Отказ",CONFIRM:"Потвърждавам"},br:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Sim"},cs:{OK:"OK",CANCEL:"Zrušit",CONFIRM:"Potvrdit"},da:{OK:"OK",CANCEL:"Annuller",CONFIRM:"Accepter"},de:{OK:"OK",CANCEL:"Abbrechen",CONFIRM:"Akzeptieren"},el:{OK:"Εντάξει",CANCEL:"Ακύρωση",CONFIRM:"Επιβεβαίωση"},en:{OK:"OK",CANCEL:"Cancel",CONFIRM:"OK"},es:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Aceptar"},et:{OK:"OK",CANCEL:"Katkesta",CONFIRM:"OK"},fa:{OK:"قبول",CANCEL:"لغو",CONFIRM:"تایید"},fi:{OK:"OK",CANCEL:"Peruuta",CONFIRM:"OK"},fr:{OK:"OK",CANCEL:"Annuler",CONFIRM:"D'accord"},he:{OK:"אישור",CANCEL:"ביטול",CONFIRM:"אישור"},hu:{OK:"OK",CANCEL:"Mégsem",CONFIRM:"Megerősít"},hr:{OK:"OK",CANCEL:"Odustani",CONFIRM:"Potvrdi"},id:{OK:"OK",CANCEL:"Batal",CONFIRM:"OK"},it:{OK:"OK",CANCEL:"Annulla",CONFIRM:"Conferma"},ja:{OK:"OK",CANCEL:"キャンセル",CONFIRM:"確認"},lt:{OK:"Gerai",CANCEL:"Atšaukti",CONFIRM:"Patvirtinti"},lv:{OK:"Labi",CANCEL:"Atcelt",CONFIRM:"Apstiprināt"},nl:{OK:"OK",CANCEL:"Annuleren",CONFIRM:"Accepteren"},no:{OK:"OK",CANCEL:"Avbryt",CONFIRM:"OK"},pl:{OK:"OK",CANCEL:"Anuluj",CONFIRM:"Potwierdź"},pt:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Confirmar"},ru:{OK:"OK",CANCEL:"Отмена",CONFIRM:"Применить"},sq:{OK:"OK",CANCEL:"Anulo",CONFIRM:"Prano"},sv:{OK:"OK",CANCEL:"Avbryt",CONFIRM:"OK"},th:{OK:"ตกลง",CANCEL:"ยกเลิก",CONFIRM:"ยืนยัน"},tr:{OK:"Tamam",CANCEL:"İptal",CONFIRM:"Onayla"},zh_CN:{OK:"OK",CANCEL:"取消",CONFIRM:"确认"},zh_TW:{OK:"OK",CANCEL:"取消",CONFIRM:"確認"}};return m.addLocale=function(e,n){return t.each(["OK","CANCEL","CONFIRM"],function(e,t){if(!n[t])throw new Error("Please supply a translation for '"+t+"'")}),g[e]={OK:n.OK,CANCEL:n.CANCEL,CONFIRM:n.CONFIRM},m},m.removeLocale=function(e){return delete g[e],m},m.setLocale=function(e){return m.setDefaults("locale",e)},m.init=function(n){return e(n||t)},m}),function(){"use strict";angular.module("ui.tree",[]).constant("treeConfig",{treeClass:"angular-ui-tree",emptyTreeClass:"angular-ui-tree-empty",hiddenClass:"angular-ui-tree-hidden",nodesClass:"angular-ui-tree-nodes",nodeClass:"angular-ui-tree-node",handleClass:"angular-ui-tree-handle",placeHolderClass:"angular-ui-tree-placeholder",dragClass:"angular-ui-tree-drag",dragThreshold:3,levelThreshold:30})}(),function(){"use strict";angular.module("ui.tree").factory("$uiTreeHelper",["$document","$window",function(e,t){return{nodesData:{},setNodeAttribute:function(e,t,n){if(!e.$modelValue)return null;var o=this.nodesData[e.$modelValue.$$hashKey];o||(o={},this.nodesData[e.$modelValue.$$hashKey]=o),o[t]=n},getNodeAttribute:function(e,t){if(!e.$modelValue)return null;var n=this.nodesData[e.$modelValue.$$hashKey];return n?n[t]:null},nodrag:function(e){return"undefined"!=typeof e.attr("data-nodrag")},eventObj:function(e){var t=e;return void 0!==e.targetTouches?t=e.targetTouches.item(0):void 0!==e.originalEvent&&void 0!==e.originalEvent.targetTouches&&(t=e.originalEvent.targetTouches.item(0)),t},dragInfo:function(e){return{source:e,sourceInfo:{nodeScope:e,index:e.index(),nodesScope:e.$parentNodesScope},index:e.index(),siblings:e.siblings().slice(0),parent:e.$parentNodesScope,moveTo:function(e,t,n){this.parent=e,this.siblings=t.slice(0);var o=this.siblings.indexOf(this.source);o>-1&&(this.siblings.splice(o,1),this.source.index()<n&&n--),this.siblings.splice(n,0,this.source),this.index=n},parentNode:function(){return this.parent.$nodeScope},prev:function(){return this.index>0?this.siblings[this.index-1]:null},next:function(){return this.index<this.siblings.length-1?this.siblings[this.index+1]:null},isDirty:function(){return this.source.$parentNodesScope!=this.parent||this.source.index()!=this.index},eventArgs:function(e,t){return{source:this.sourceInfo,dest:{index:this.index,nodesScope:this.parent},elements:e,pos:t}},apply:function(){var e=this.source.$modelValue;this.source.remove(),this.parent.insertNode(this.index,e)}}},height:function(e){return e.prop("scrollHeight")},width:function(e){return e.prop("scrollWidth")},offset:function(n){var o=n[0].getBoundingClientRect();return{width:n.prop("offsetWidth"),height:n.prop("offsetHeight"),top:o.top+(t.pageYOffset||e[0].body.scrollTop||e[0].documentElement.scrollTop),left:o.left+(t.pageXOffset||e[0].body.scrollLeft||e[0].documentElement.scrollLeft)}},positionStarted:function(e,t){var n={};return n.offsetX=e.pageX-this.offset(t).left,n.offsetY=e.pageY-this.offset(t).top,n.startX=n.lastX=e.pageX,n.startY=n.lastY=e.pageY,n.nowX=n.nowY=n.distX=n.distY=n.dirAx=0,n.dirX=n.dirY=n.lastDirX=n.lastDirY=n.distAxX=n.distAxY=0,n},positionMoved:function(e,t,n){t.lastX=t.nowX,t.lastY=t.nowY,t.nowX=e.pageX,t.nowY=e.pageY,t.distX=t.nowX-t.lastX,t.distY=t.nowY-t.lastY,t.lastDirX=t.dirX,t.lastDirY=t.dirY,t.dirX=0===t.distX?0:t.distX>0?1:-1,t.dirY=0===t.distY?0:t.distY>0?1:-1;var o=Math.abs(t.distX)>Math.abs(t.distY)?1:0;return n?(t.dirAx=o,void(t.moving=!0)):(t.dirAx!==o?(t.distAxX=0,t.distAxY=0):(t.distAxX+=Math.abs(t.distX),0!==t.dirX&&t.dirX!==t.lastDirX&&(t.distAxX=0),t.distAxY+=Math.abs(t.distY),0!==t.dirY&&t.dirY!==t.lastDirY&&(t.distAxY=0)),void(t.dirAx=o))}}}])}(),function(){"use strict";angular.module("ui.tree").controller("TreeController",["$scope","$element","$attrs","treeConfig",function(e,t,n,o){this.scope=e,e.$element=t,e.$nodesScope=null,e.$type="uiTree",e.$emptyElm=null,e.$callbacks=null,e.dragEnabled=!0,e.emptyPlaceHolderEnabled=!0,e.maxDepth=0,e.dragDelay=0,e.isEmpty=function(){return e.$nodesScope&&e.$nodesScope.$modelValue&&0===e.$nodesScope.$modelValue.length},e.place=function(t){e.$nodesScope.$element.append(t),e.$emptyElm.remove()},e.resetEmptyElement=function(){0===e.$nodesScope.$modelValue.length&&e.emptyPlaceHolderEnabled?t.append(e.$emptyElm):e.$emptyElm.remove()};var i=function(e,t){for(var n=e.childNodes(),o=0;o<n.length;o++){t?n[o].collapse():n[o].expand();var r=n[o].$childNodesScope;r&&i(r,t)}};e.collapseAll=function(){i(e.$nodesScope,!0)},e.expandAll=function(){i(e.$nodesScope,!1)}}])}(),function(){"use strict";angular.module("ui.tree").controller("TreeNodesController",["$scope","$element","treeConfig",function(e,t,n){this.scope=e,e.$element=t,e.$modelValue=null,e.$nodeScope=null,e.$treeScope=null,e.$type="uiTreeNodes",e.$nodesMap={},e.nodrop=!1,e.maxDepth=0,e.initSubNode=function(t){return t.$modelValue?void(e.$nodesMap[t.$modelValue.$$hashKey]=t):null},e.destroySubNode=function(t){return t.$modelValue?void(e.$nodesMap[t.$modelValue.$$hashKey]=null):null},e.accept=function(t,n){return e.$treeScope.$callbacks.accept(t,e,n)},e.beforeDrag=function(t){return e.$treeScope.$callbacks.beforeDrag(t)},e.isParent=function(t){return t.$parentNodesScope==e},e.hasChild=function(){return e.$modelValue.length>0},e.safeApply=function(e){var t=this.$root.$$phase;"$apply"==t||"$digest"==t?e&&"function"==typeof e&&e():this.$apply(e)},e.removeNode=function(t){var n=e.$modelValue.indexOf(t.$modelValue);return n>-1?(e.safeApply(function(){e.$modelValue.splice(n,1)[0]}),t):null},e.insertNode=function(t,n){e.safeApply(function(){e.$modelValue.splice(t,0,n)})},e.childNodes=function(){var t=[];if(e.$modelValue)for(var n=0;n<e.$modelValue.length;n++)t.push(e.$nodesMap[e.$modelValue[n].$$hashKey]);return t},e.depth=function(){return e.$nodeScope?e.$nodeScope.depth():0},e.outOfDepth=function(t){var n=e.maxDepth||e.$treeScope.maxDepth;return n>0?e.depth()+t.maxSubDepth()+1>n:!1}}])}(),function(){"use strict";angular.module("ui.tree").controller("TreeNodeController",["$scope","$element","$attrs","treeConfig",function(e,t,n,o){this.scope=e,e.$element=t,e.$modelValue=null,e.$parentNodeScope=null,e.$childNodesScope=null,e.$parentNodesScope=null,e.$treeScope=null,e.$handleScope=null,e.$type="uiTreeNode",e.$$apply=!1,e.collapsed=!1,e.init=function(n){var o=n[0];e.$treeScope=n[1]?n[1].scope:null,e.$parentNodeScope=o.scope.$nodeScope,e.$modelValue=o.scope.$modelValue[e.$index],e.$parentNodesScope=o.scope,o.scope.initSubNode(e),t.on("$destroy",function(){o.scope.destroySubNode(e)})},e.index=function(){return e.$parentNodesScope.$modelValue.indexOf(e.$modelValue)},e.dragEnabled=function(){return!(e.$treeScope&&!e.$treeScope.dragEnabled)},e.isSibling=function(t){return e.$parentNodesScope==t.$parentNodesScope},e.isChild=function(t){var n=e.childNodes();return n&&n.indexOf(t)>-1},e.prev=function(){var t=e.index();return t>0?e.siblings()[t-1]:null},e.siblings=function(){return e.$parentNodesScope.childNodes()},e.childNodesCount=function(){return e.childNodes()?e.childNodes().length:0},e.hasChild=function(){return e.childNodesCount()>0},e.childNodes=function(){return e.$childNodesScope&&e.$childNodesScope.$modelValue?e.$childNodesScope.childNodes():null},e.accept=function(t,n){return e.$childNodesScope&&e.$childNodesScope.$modelValue&&e.$childNodesScope.accept(t,n)},e.removeNode=function(){var t=e.remove();return e.$callbacks.removed(t),t},e.remove=function(){return e.$parentNodesScope.removeNode(e)},e.toggle=function(){e.collapsed=!e.collapsed},e.collapse=function(){e.collapsed=!0},e.expand=function(){e.collapsed=!1},e.depth=function(){var t=e.$parentNodeScope;return t?t.depth()+1:1};var i=0,r=function(e){for(var t=0,n=e.childNodes(),o=0;o<n.length;o++){var a=n[o].$childNodesScope;a&&(t=1,r(a))}i+=t};e.maxSubDepth=function(){return i=0,e.$childNodesScope&&r(e.$childNodesScope),i}}])}(),function(){"use strict";angular.module("ui.tree").controller("TreeHandleController",["$scope","$element","$attrs","treeConfig",function(e,t,n,o){this.scope=e,e.$element=t,e.$nodeScope=null,e.$type="uiTreeHandle"}])}(),function(){"use strict";angular.module("ui.tree").directive("uiTree",["treeConfig","$window",function(e,t){return{restrict:"A",scope:!0,controller:"TreeController",link:function(n,o,i){var r={accept:null,beforeDrag:null},a={};angular.extend(a,e),a.treeClass&&o.addClass(a.treeClass),n.$emptyElm=angular.element(t.document.createElement("div")),a.emptyTreeClass&&n.$emptyElm.addClass(a.emptyTreeClass),n.$watch("$nodesScope.$modelValue.length",function(){n.$nodesScope.$modelValue&&n.resetEmptyElement()},!0),n.$watch(i.dragEnabled,function(e){"boolean"==typeof e&&(n.dragEnabled=e)}),n.$watch(i.emptyPlaceHolderEnabled,function(e){"boolean"==typeof e&&(n.emptyPlaceHolderEnabled=e)}),n.$watch(i.maxDepth,function(e){"number"==typeof e&&(n.maxDepth=e)}),n.$watch(i.dragDelay,function(e){"number"==typeof e&&(n.dragDelay=e)}),r.accept=function(e,t,n){return!t.nodrop&&!t.outOfDepth(e)},r.beforeDrag=function(e){return!0},r.removed=function(e){},r.dropped=function(e){},r.dragStart=function(e){},r.dragMove=function(e){},r.dragStop=function(e){},r.beforeDrop=function(e){},n.$watch(i.uiTree,function(e,t){angular.forEach(e,function(e,t){r[t]&&"function"==typeof e&&(r[t]=e)}),n.$callbacks=r},!0)}}}])}(),function(){"use strict";angular.module("ui.tree").directive("uiTreeNodes",["treeConfig","$window",function(e){return{require:["ngModel","?^uiTreeNode","^uiTree"],restrict:"A",scope:!0,controller:"TreeNodesController",link:function(t,n,o,i){var r={};angular.extend(r,e),r.nodesClass&&n.addClass(r.nodesClass);var a=i[0],l=i[1],s=i[2];l?(l.scope.$childNodesScope=t,t.$nodeScope=l.scope):s.scope.$nodesScope=t,t.$treeScope=s.scope,a&&(a.$render=function(){a.$modelValue&&angular.isArray(a.$modelValue)||(t.$modelValue=[]),t.$modelValue=a.$modelValue}),t.$watch(o.maxDepth,function(e){"number"==typeof e&&(t.maxDepth=e)}),o.$observe("nodrop",function(e){t.nodrop="undefined"!=typeof e}),o.$observe("horizontal",function(e){t.horizontal="undefined"!=typeof e})}}}])}(),function(){"use strict";angular.module("ui.tree").directive("uiTreeNode",["treeConfig","$uiTreeHelper","$window","$document","$timeout",function(e,t,n,o,i){return{require:["^uiTreeNodes","^uiTree"],restrict:"A",controller:"TreeNodeController",link:function(r,a,l,s){var d={};angular.extend(d,e),d.nodeClass&&a.addClass(d.nodeClass),r.init(s),r.collapsed=!!t.getNodeAttribute(r,"collapsed"),r.$watch(l.collapsed,function(e){"boolean"==typeof e&&(r.collapsed=e)}),r.$watch("collapsed",function(e){t.setNodeAttribute(r,"collapsed",e),l.$set("collapsed",e)});var c,u,f,p,h,m,g,v,b,y="ontouchstart"in window,C=null,x=!0,k=!1,w=null,N=document.body,E=document.documentElement,S=function(e){if((y||2!=e.button&&3!=e.which)&&!(e.uiTreeDragging||e.originalEvent&&e.originalEvent.uiTreeDragging)){var i=angular.element(e.target),l=i.scope();if(l&&l.$type&&!("uiTreeNode"!=l.$type&&"uiTreeHandle"!=l.$type||"uiTreeNode"==l.$type&&l.$handleScope)){var s=i.prop("tagName").toLowerCase();if("input"!=s&&"textarea"!=s&&"button"!=s&&"select"!=s){for(;i&&i[0]&&i[0]!=a;){if(t.nodrag(i))return;i=i.parent()}if(r.beforeDrag(r)){e.uiTreeDragging=!0,e.originalEvent&&(e.originalEvent.uiTreeDragging=!0),e.preventDefault();var C=t.eventObj(e);c=!0,u=t.dragInfo(r);var x=r.$element.prop("tagName");if("tr"===x.toLowerCase()){p=angular.element(n.document.createElement(x));var k=angular.element(n.document.createElement("td")).addClass(d.placeHolderClass);p.append(k)}else p=angular.element(n.document.createElement(x)).addClass(d.placeHolderClass);h=angular.element(n.document.createElement(x)),d.hiddenClass&&h.addClass(d.hiddenClass),f=t.positionStarted(C,r.$element),p.css("height",t.height(r.$element)+"px"),p.css("width",t.width(r.$element)+"px"),m=angular.element(n.document.createElement(r.$parentNodesScope.$element.prop("tagName"))).addClass(r.$parentNodesScope.$element.attr("class")).addClass(d.dragClass),m.css("width",t.width(r.$element)+"px"),m.css("z-index",9999);var w=(r.$element[0].querySelector(".angular-ui-tree-handle")||r.$element[0]).currentStyle;w&&(document.body.setAttribute("ui-tree-cursor",o.find("body").css("cursor")||""),o.find("body").css({cursor:w.cursor+"!important"})),r.$element.after(p),r.$element.after(h),m.append(r.$element),o.find("body").append(m),m.css({left:C.pageX-f.offsetX+"px",top:C.pageY-f.offsetY+"px"}),g={placeholder:p,dragging:m},angular.element(o).bind("touchend",A),angular.element(o).bind("touchcancel",A),angular.element(o).bind("touchmove",M),angular.element(o).bind("mouseup",A),angular.element(o).bind("mousemove",M),angular.element(o).bind("mouseleave",I),v=Math.max(N.scrollHeight,N.offsetHeight,E.clientHeight,E.scrollHeight,E.offsetHeight),b=Math.max(N.scrollWidth,N.offsetWidth,E.clientWidth,E.scrollWidth,E.offsetWidth)}}}}},T=function(e){if(!k)return void(x||(k=!0,r.$apply(function(){r.$callbacks.dragStart(u.eventArgs(g,f))})));var o,i,a,l=t.eventObj(e);if(m){e.preventDefault(),n.getSelection?n.getSelection().removeAllRanges():n.document.selection&&n.document.selection.empty(),i=l.pageX-f.offsetX,a=l.pageY-f.offsetY,0>i&&(i=0),0>a&&(a=0),a+10>v&&(a=v-10),i+10>b&&(i=b-10),m.css({left:i+"px",top:a+"px"});var s=window.pageYOffset||n.document.documentElement.scrollTop,h=s+(window.innerHeight||n.document.clientHeight||n.document.clientHeight);if(h<l.pageY&&v>=h&&window.scrollBy(0,10),s>l.pageY&&window.scrollBy(0,-10),t.positionMoved(e,f,c),c)return void(c=!1);if(f.dirAx&&f.distAxX>=d.levelThreshold&&(f.distAxX=0,f.distX>0&&(o=u.prev(),o&&!o.collapsed&&o.accept(r,o.childNodesCount())&&(o.$childNodesScope.$element.append(p),u.moveTo(o.$childNodesScope,o.childNodes(),o.childNodesCount()))),f.distX<0)){var y=u.next();if(!y){var w=u.parentNode();w&&w.$parentNodesScope.accept(r,w.index()+1)&&(w.$element.after(p),u.moveTo(w.$parentNodesScope,w.siblings(),w.index()+1))}}var N,E=(t.offset(m).left-t.offset(p).left>=d.threshold,l.pageX-n.document.body.scrollLeft),S=l.pageY-(window.pageYOffset||n.document.documentElement.scrollTop);angular.isFunction(m.hide)?m.hide():(N=m[0].style.display,m[0].style.display="none"),n.document.elementFromPoint(E,S);var T=angular.element(n.document.elementFromPoint(E,S));if(angular.isFunction(m.show)?m.show():m[0].style.display=N,!f.dirAx){var $,D;D=T.scope();var M=!1;if(!D)return;if("uiTree"==D.$type&&D.dragEnabled&&(M=D.isEmpty()),"uiTreeHandle"==D.$type&&(D=D.$nodeScope),"uiTreeNode"!=D.$type&&!M)return;if(C&&p.parent()[0]!=C.$element[0]&&(C.resetEmptyElement(),C=null),M)C=D,D.$nodesScope.accept(r,0)&&(D.place(p),u.moveTo(D.$nodesScope,D.$nodesScope.childNodes(),0));else if(D.dragEnabled()){T=D.$element;var A=t.offset(T);$=D.horizontal?l.pageX<A.left+t.width(T)/2:l.pageY<A.top+t.height(T)/2,D.$parentNodesScope.accept(r,D.index())?$?(T[0].parentNode.insertBefore(p[0],T[0]),u.moveTo(D.$parentNodesScope,D.siblings(),D.index())):(T.after(p),u.moveTo(D.$parentNodesScope,D.siblings(),D.index()+1)):!$&&D.accept(r,D.childNodesCount())&&(D.$childNodesScope.$element.append(p),u.moveTo(D.$childNodesScope,D.childNodes(),D.childNodesCount()))}}r.$apply(function(){r.$callbacks.dragMove(u.eventArgs(g,f))})}},$=function(e){e.preventDefault(),m&&(r.$treeScope.$apply(function(){r.$callbacks.beforeDrop(u.eventArgs(g,f))}),h.replaceWith(r.$element),p.remove(),m.remove(),m=null,r.$$apply?(u.apply(),r.$treeScope.$apply(function(){r.$callbacks.dropped(u.eventArgs(g,f))})):F(),r.$treeScope.$apply(function(){r.$callbacks.dragStop(u.eventArgs(g,f))}),r.$$apply=!1,u=null);var t=document.body.getAttribute("ui-tree-cursor");null!==t&&(o.find("body").css({cursor:t}),document.body.removeAttribute("ui-tree-cursor")),angular.element(o).unbind("touchend",A),angular.element(o).unbind("touchcancel",A),angular.element(o).unbind("touchmove",M),angular.element(o).unbind("mouseup",A),angular.element(o).unbind("mousemove",M),angular.element(n.document.body).unbind("mouseleave",I)},D=function(e){r.dragEnabled()&&S(e)},M=function(e){T(e)},A=function(e){r.$$apply=!0,$(e)},I=function(e){$(e)},F=function(){a.bind("touchstart mousedown",function(e){x=!0,k=!1,D(e),w=i(function(){x=!1},r.dragDelay)}),a.bind("touchend touchcancel mouseup",function(){i.cancel(w)})};F(),angular.element(n.document.body).bind("keydown",function(e){27==e.keyCode&&(r.$$apply=!1,$(e))})}}}])}(),function(){"use strict";angular.module("ui.tree").directive("uiTreeHandle",["treeConfig","$window",function(e){return{require:"^uiTreeNode",restrict:"A",scope:!0,controller:"TreeHandleController",link:function(t,n,o,i){var r={};angular.extend(r,e),r.handleClass&&n.addClass(r.handleClass),t!=i.scope&&(t.$nodeScope=i.scope,i.scope.$handleScope=t)}}}])}(),!function(e){"use strict";e.module("jcs-autoValidate",[])}(angular),function(e){"use strict";e.module("jcs-autoValidate").provider("validator",[function(){var e={},t=!0,n=!0,o=!0,i=function(e){var t;return e&&0!==e.length?(t=e.toLowerCase(),e=!("f"===t||"0"===t||"false"===t)):e=!1,e},r=function(e,t){var n;return void 0!==e&&(n=e.attr(t)||e.attr("data-"+t)),n},a=function(e,t){return i(r(e,t))},l=function(e){return t&&!a(e,"disable-valid-styling")},s=function(e){return n&&!a(e,"disable-invalid-styling")};this.enable=function(e){o=e},this.isEnabled=function(){return o},this.setDefaultElementModifier=function(t){if(void 0===e[t])throw new Error("Element modifier not registered: "+t);this.defaultElementModifier=t},this.registerDomModifier=function(t,n){e[t]=n},this.setErrorMessageResolver=function(e){this.errorMessageResolver=e},this.getErrorMessage=function(e,t){if(void 0===this.errorMessageResolver)throw new Error("Please set an error message resolver via the setErrorMessageResolver function before attempting to resolve an error message.");return this.errorMessageResolver(e,t)},this.setValidElementStyling=function(e){t=e},this.setInvalidElementStyling=function(e){n=e},this.getDomModifier=function(t){var n=(void 0!==t?t.attr("element-modifier"):this.defaultElementModifier)||(void 0!==t?t.attr("data-element-modifier"):this.defaultElementModifier)||this.defaultElementModifier;if(void 0===n)throw new Error("Please set a default dom modifier via the setDefaultElementModifier method on the validator class.");return e[n]},this.makeValid=function(e){l(e)?this.getDomModifier(e).makeValid(e):this.makeDefault(e)},this.makeInvalid=function(e,t){s(e)?this.getDomModifier(e).makeInvalid(e,t):this.makeDefault(e)},this.makeDefault=function(e){var t=this.getDomModifier(e);t.makeDefault&&t.makeDefault(e)},this.$get=[function(){return this}]}])}(angular),function(e){"use strict";e.module("jcs-autoValidate").factory("bootstrap3ElementModifier",["$log",function(t){var n=function(t){e.forEach(t.find("span"),function(t){t=e.element(t),(t.hasClass("error-msg")||t.hasClass("form-control-feedback")||t.hasClass("control-feedback"))&&t.remove()}),t.removeClass("has-success has-error has-feedback")},o=function(e,t){for(var n,o=e,i=0;3>=i;i+=1){if(void 0!==o&&o.hasClass(t)){n=o;break}void 0!==o&&(o=o.parent())}return n},i=function(t,n){for(var o,r=0;r<t.children.length&&(o=t.children[r],void 0===o||!e.element(o).hasClass(n))&&!(void 0!==o.children&&(o=i(o,n),o.length>0));r+=1);return e.element(o)},r=function(e){return o(e,"form-group")},a=function(e){return i(e,"input-group")},l=function(e,t){e[0].parentNode.insertBefore(t[0],e[0].nextSibling)},s=!1,d=function(e){s=e},c=function(o){var i,d=r(o);if(d){if(n(d),i=a(d[0]),d.addClass("has-success "+(i.length>0?"":"has-feedback")),s){var c='<span class="glyphicon glyphicon-ok form-control-feedback"></span>';i.length>0&&(c=c.replace("form-",""),c='<span class="input-group-addon control-feedback">'+c+"</span"),l(o,e.element(c))}}else t.error("Angular-auto-validate: invalid bs3 form structure elements must be wrapped by a form-group class")},u=function(o,i){var d,c=r(o),u=e.element('<span class="help-block has-error error-msg">'+i+"</span>");if(c){if(n(c),d=a(c[0]),c.addClass("has-error "+(d.length>0?"":"has-feedback")),l(d.length>0?d:o,u),s){var f='<span class="glyphicon glyphicon-remove form-control-feedback"></span>';d.length>0&&(f=f.replace("form-",""),f='<span class="input-group-addon control-feedback">'+f+"</span"),l(o,e.element(f))}}else t.error("Angular-auto-validate: invalid bs3 form structure elements must be wrapped by a form-group class")},f=function(e){var t=r(e);n(t)};return{makeValid:c,makeInvalid:u,makeDefault:f,enableValidationStateIcons:d,key:"bs3"}}])}(angular),function(e){"use strict";e.module("jcs-autoValidate").factory("jcs-debounce",["$timeout",function(t){var n=function(n,o,i){o=e.isUndefined(o)?0:o,i=e.isUndefined(i)?!0:i;var r=0;return function(){var e=this,a=arguments;r+=1;var l=function(t){return function(){return t===r?n.apply(e,a):void 0}}(r);return t(l,o,i)}};return{debounce:n}}])}(angular),function(e,t){"use strict";"format"in e.prototype||(e.prototype.format=function(){var e=arguments;return this.replace(/{(\d+)}/g,function(t,n){return void 0!==typeof e[n]?e[n]:t})}),t.autoValidate=t.autoValidate||{errorMessages:{}},t.autoValidate.errorMessages["en-us"]=t.autoValidate.errorMessages["en-gb"]={defaultMsg:"Please add error message for {0}",email:"Please enter a valid email address",minlength:"Please enter at least {0} characters",maxlength:"You have entered more than the maximum {0} characters",min:"Please enter the minimum number of {0}",max:"Please enter the maximum number of {0}",required:"This field is required",date:"Please enter a valid date",pattern:"Please ensure the entered information adheres to this pattern {0}",number:"Please enter a valid number",url:"Please enter a valid URL in the format of http(s)://wwww.google.com"},t.module("jcs-autoValidate").factory("defaultErrorMessageResolver",["$q","$http",function(e,n){var o,i="en-gb",r="js/angular-auto-validate/dist/lang",a=function(e){return o=n.get("{0}/jcs-auto-validate_{1}.json".format(r,e.toLowerCase()))},l=function(e){r=e},s=function(n,r){var l=e.defer();return r=r||a,i=n.toLowerCase(),void 0===t.autoValidate.errorMessages[i]?(o=r(n),o.then(function(e){o=void 0,t.autoValidate.errorMessages[i]=e.data,l.resolve(t.autoValidate.errorMessages[i])},function(e){t.autoValidate.errorMessages[i]={defaultMsg:"Loading culture failed!"},o=null,l.reject(e)})):l.resolve(t.autoValidate.errorMessages[i]),l.promise},d=function(n){var r=e.defer();return n=void 0===n?i:n.toLowerCase(),void 0!==o?o.then(function(){r.resolve(t.autoValidate.errorMessages[n])},function(e){r.reject(e)}):r.resolve(t.autoValidate.errorMessages[n]),r.promise},c=function(e,t){var n;return t&&(e+="-err-type",n=t.attr(e),void 0===n&&(n=t.attr("data-ng-"+e)||t.attr("ng-"+e)),n&&(n=n.replace(/[\W]/g,""))),n},u=function(n,r){var a,l,s,d=e.defer(),f=[];if(void 0!==o)o.then(function(){
u(n,r).then(function(e){d.resolve(e)})});else{if(a=t.autoValidate.errorMessages[i][n],s=c(n,r),s&&(a=t.autoValidate.errorMessages[i][s]),void 0===a&&(a=t.autoValidate.errorMessages[i].defaultMsg.format(n)),r&&r.attr)try{l=r.attr(n),void 0===l&&(l=r.attr("data-ng-"+n)||r.attr("ng-"+n)),f.push(l||""),a=a.format(f)}catch(p){}d.resolve(a)}return d.promise};return{setI18nFileRootPath:l,setCulture:s,getErrorMessages:d,resolve:u}}])}(String,angular),function(e){"use strict";e.module("jcs-autoValidate").factory("foundation5ElementModifier",[function(){var t=function(t,n){e.forEach(t.find("small"),function(t){e.element(t).hasClass("error")&&e.element(t).remove()}),n.removeClass("error")},n=function(e){for(var t=e,n=0;3>=n&&(void 0===t||!t.hasClass("columns"));n+=1)void 0!==t&&(t=t.parent());return t},o=function(e){var o=n(e);t(o&&o.length>0?o:e,e)},i=function(o,i){var r,a=n(o);t(a||o,o),o.addClass("error"),a&&(r=e.element('<small class="error">'+i+"</small>"),a.append(r))},r=function(e){o(e)};return{makeValid:o,makeInvalid:i,makeDefault:r,key:"foundation5"}}])}(angular),function(e){"use strict";e.module("jcs-autoValidate").factory("jcs-elementUtils",[function(){var e=function(e){return e[0].offsetWidth>0&&e[0].offsetHeight>0};return{isElementVisible:e}}]),e.module("jcs-autoValidate").factory("validationManager",["validator","jcs-elementUtils",function(t,n){var o=["input","textarea","select","form"],i=function(e){return n.isElementVisible(e)},r=function(e){return e&&e.length>0&&i(e)&&o.indexOf(e[0].nodeName.toLowerCase())>-1},a=function(n,o,i){var a,l=!0,s=n.$pristine===!1||i,d=function(t){var n,o=!0;return e.forEach(t,function(e,t){o&&e&&(o=!1,n=t)}),n};return(i||r(o)&&n&&s)&&(l=!n.$invalid,l?t.makeValid(o):(a=d(n.$error),void 0===a?l=!0:t.getErrorMessage(a,o).then(function(e){t.makeInvalid(o,e)}))),l},l=function(e){t.makeDefault(e)},s=function(t){e.forEach(t[0],function(t){var n,o=e.element(t);n=o.controller("ngModel"),void 0!==n&&("form"===o[0].nodeName.toLowerCase()?s(o):n.$setPristine())})},d=function(t){var n=!0,o=t?e.element(t).controller("form"):void 0,i=function(t,o){var i,l;t=e.element(t),i=t.controller("ngModel"),void 0!==i&&(o||r(t))&&("form"===t[0].nodeName.toLowerCase()?d(t):(l=a(i,t,!0),n=n&&l))};return void 0===t||void 0!==o&&o.disableDynamicValidation?void 0!==t:(e.forEach(t[0],function(e){i(e)}),t[0].customHTMLFormControlsCollection&&e.forEach(t[0].customHTMLFormControlsCollection,function(e){i(e,!0)}),n)},c=function(e,n,o){n?t.getErrorMessage(n,e).then(function(n){t.makeInvalid(e,n)}):t.makeInvalid(e,o)};return{setElementValidationError:c,validateElement:a,validateForm:d,resetElement:l,resetForm:s}}])}(angular),function(e){"use strict";e.module("jcs-autoValidate").directive("form",["validationManager",function(e){return{restrict:"E",link:function(t,n){n.on("reset",function(){e.resetForm(n)}),t.$on("$destroy",function(){n.off("reset")})}}}])}(angular),function(e){"use strict";e.module("jcs-autoValidate").directive("registerCustomFormControl",[function(){var t=function(t){for(var n=t,o=0;10>=o&&(void 0===n||"form"!==n.nodeName.toLowerCase());o+=1)void 0!==n&&(n=e.element(n).parent()[0]);return n};return{restrict:"A",link:function(e,n){var o=t(n.parent()[0]);o&&(o.customHTMLFormControlsCollection=o.customHTMLFormControlsCollection||[],o.customHTMLFormControlsCollection.push(n[0]))}}}])}(angular),function(e){"use strict";e.module("jcs-autoValidate").directive("form",["validator",function(e){return{restrict:"E",require:"form",compile:function(){return{pre:function(t,n,o,i){i.disableDynamicValidation=!e.isEnabled(),void 0!==o.disableDynamicValidation&&(i.disableDynamicValidation=void 0===o.disableDynamicValidation||""===o.disableDynamicValidation||"true"===o.disableDynamicValidation)}}}}}])}(angular),function(e){"use strict";e.module("jcs-autoValidate").config(["$provide",function(e){e.decorator("ngSubmitDirective",["$delegate","$parse","validationManager",function(e,t,n){return e[0].compile=function(e,o){var i=t(o.ngSubmit),r="true"===o.ngSubmitForce;return function(e,t){t.on("submit",function(o){e.$apply(function(){(n.validateForm(t)||r===!0)&&i(e,{$event:o})})})}},e}])}])}(angular),function(e){"use strict";e.module("jcs-autoValidate").config(["$provide",function(t){t.decorator("ngModelDirective",["$timeout","$delegate","validationManager","jcs-debounce",function(t,n,o,i){var r=n[0],a=r.link||r.compile;return r.compile=function(t){return function(n,r,l,s){var d=s[0],c=s[1],u=e.version.major>=1&&e.version.minor>=3,f=void 0===l.ngModelOptions?void 0:n.$eval(l.ngModelOptions),p=d.$setValidity,h=d.$setPristine,m=i.debounce(function(){o.validateElement(d,r)},100);u&&e.isFunction(a)&&(a=a(t)),a.pre&&(a.pre.apply(this,arguments),f=void 0===d.$options?void 0:d.$options),(void 0===l.formnovalidate||void 0!==c&&c.disableDynamicValidation===!1)&&(u||void 0===f||void 0===f.updateOn||""===f.updateOn?d.$setValidity=function(e,t){p.call(d,e,t),m()}:(r.on(f.updateOn,function(){m()}),n.$on("$destroy",function(){r.off(f.updateOn)})),d.$setPristine=function(){h.call(d),o.resetElement(r)},d.autoValidated=!0),a.post?a.post.apply(this,arguments):a.apply(this,arguments),d.setExternalValidation=function(e,t,n){n&&(d.$error?d.$error[e]=!1:d.$errors[e]=!1),o.setElementValidationError(r,e,t)},d.removeExternalValidation=function(e,t){t&&(d.$error?d.$error[e]=!0:d.$errors[e]=!0),o.resetElement(r)},c&&(c.setExternalValidation=function(e,t,n,o){var i=!1;return c[e]&&(c[e].setExternalValidation(t,n,o),i=!0),i},c.removeExternalValidation=function(e,t,n,o){var i=!1;return c[e]&&(c[e].removeExternalValidation(t,o),i=!0),i})}},n}])}])}(angular),function(e){"use strict";e.module("jcs-autoValidate").run(["validator","defaultErrorMessageResolver","bootstrap3ElementModifier","foundation5ElementModifier",function(e,t,n,o){e.setErrorMessageResolver(t.resolve),e.registerDomModifier(n.key,n),e.registerDomModifier(o.key,o),e.setDefaultElementModifier(n.key)}])}(angular),angular.module("ui.checkbox",[]).directive("checkbox",function(){return{scope:{},require:"ngModel",restrict:"E",replace:"true",template:"<button type=\"button\" ng-style=\"stylebtn\" class=\"btn btn-white\" ng-class=\"{'btn-xs': size==='default', 'btn-sm': size==='large', 'btn-lg': size==='largest'}\">"+'<span ng-style="styleicon" class="glyphicon" ng-class="{\'fa fa-check\': checked===true}"></span></button>',link:function(e,t,n,o){var i=t.next("span");e.size="default",e.stylebtn={},e.styleicon={width:"10px",left:"-1px"},void 0!==n.large&&(e.size="large",e.stylebtn={"padding-top":"2px","padding-bottom":"2px",height:"30px"},e.styleicon={width:"8px",left:"-5px","font-size":"17px"}),void 0!==n.larger&&(e.size="larger",e.stylebtn={"padding-top":"2px","padding-bottom":"2px",height:"34px"},e.styleicon={width:"8px",left:"-8px","font-size":"22px"}),void 0!==n.largest&&(e.size="largest",e.stylebtn={"padding-top":"2px","padding-bottom":"2px",height:"45px"},e.styleicon={width:"11px",left:"-11px","font-size":"30px"});var r=!0,a=!1;void 0!==n.ngTrueValue&&(r=n.ngTrueValue),void 0!==n.ngFalseValue&&(a=n.ngFalseValue),void 0!==e.name&&(t.name=e.name),e.$watch(function(){return o.$modelValue===r||o.$modelValue===!0?(o.$setViewValue(r),i.addClass("todo-completed")):o.$setViewValue(a),o.$modelValue},function(t,n){e.checked=o.$modelValue===r},!0),t.bind("click",function(){e.$apply(function(){o.$modelValue===a?(o.$setViewValue(r),i.toggleClass("todo-completed")):(o.$setViewValue(a),i.toggleClass("todo-completed"))})})}}}),function(e){function t(e,t,i){var r=e[0],a=/er/.test(i)?_indeterminate:/bl/.test(i)?p:u,l=i==_update?{checked:r[u],disabled:r[p],indeterminate:"true"==e.attr(_indeterminate)||"false"==e.attr(_determinate)}:r[a];if(/^(ch|di|in)/.test(i)&&!l)n(e,a);else if(/^(un|en|de)/.test(i)&&l)o(e,a);else if(i==_update)for(var s in l)l[s]?n(e,s,!0):o(e,s,!0);else t&&"toggle"!=i||(t||e[_callback]("ifClicked"),l?r[_type]!==c&&o(e,a):n(e,a))}function n(t,n,i){var h=t[0],m=t.parent(),g=n==u,v=n==_indeterminate,b=n==p,y=v?_determinate:g?f:"enabled",C=r(t,y+a(h[_type])),x=r(t,n+a(h[_type]));if(!0!==h[n]){if(!i&&n==u&&h[_type]==c&&h.name){var k=t.closest("form"),w='input[name="'+h.name+'"]',w=k.length?k.find(w):e(w);w.each(function(){this!==h&&e(this).data(s)&&o(e(this),n)})}v?(h[n]=!0,h[u]&&o(t,u,"force")):(i||(h[n]=!0),g&&h[_indeterminate]&&o(t,_indeterminate,!1)),l(t,g,n,i)}h[p]&&r(t,_cursor,!0)&&m.find("."+d).css(_cursor,"default"),m[_add](x||r(t,n)||""),m.attr("role")&&!v&&m.attr("aria-"+(b?p:u),"true"),m[_remove](C||r(t,y)||"")}function o(e,t,n){var o=e[0],i=e.parent(),s=t==u,c=t==_indeterminate,h=t==p,m=c?_determinate:s?f:"enabled",g=r(e,m+a(o[_type])),v=r(e,t+a(o[_type]));!1!==o[t]&&(!c&&n&&"force"!=n||(o[t]=!1),l(e,s,m,n)),!o[p]&&r(e,_cursor,!0)&&i.find("."+d).css(_cursor,"pointer"),i[_remove](v||r(e,t)||""),i.attr("role")&&!c&&i.attr("aria-"+(h?p:u),"false"),i[_add](g||r(e,m)||"")}function i(t,n){t.data(s)&&(t.parent().html(t.attr("style",t.data(s).s||"")),n&&t[_callback](n),t.off(".i").unwrap(),e(_label+'[for="'+t[0].id+'"]').add(t.closest(_label)).off(".i"))}function r(e,t,n){return e.data(s)?e.data(s).o[t+(n?"":"Class")]:void 0}function a(e){return e.charAt(0).toUpperCase()+e.slice(1)}function l(e,t,n,o){o||(t&&e[_callback]("ifToggled"),e[_callback]("ifChanged")[_callback]("if"+a(n)))}var s="iCheck",d=s+"-helper",c="radio",u="checked",f="un"+u,p="disabled";_determinate="determinate",_indeterminate="in"+_determinate,_update="update",_type="type",_click="click",_touch="touchbegin.i touchend.i",_add="addClass",_remove="removeClass",_callback="trigger",_label="label",_cursor="cursor",_mobile=/ipad|iphone|ipod|android|blackberry|windows phone|opera mini|silk/i.test(navigator.userAgent),e.fn[s]=function(r,a){var l='input[type="checkbox"], input[type="'+c+'"]',f=e(),h=function(t){t.each(function(){var t=e(this);f=t.is(l)?f.add(t):f.add(t.find(l))})};if(/^(check|uncheck|toggle|indeterminate|determinate|disable|enable|update|destroy)$/i.test(r))return r=r.toLowerCase(),h(this),f.each(function(){var n=e(this);"destroy"==r?i(n,"ifDestroyed"):t(n,!0,r),e.isFunction(a)&&a()});if("object"!=typeof r&&r)return this;var m=e.extend({checkedClass:u,disabledClass:p,indeterminateClass:_indeterminate,labelHover:!0},r),g=m.handle,v=m.hoverClass||"hover",b=m.focusClass||"focus",y=m.activeClass||"active",C=!!m.labelHover,x=m.labelHoverClass||"hover",k=0|(""+m.increaseArea).replace("%","");return"checkbox"!=g&&g!=c||(l='input[type="'+g+'"]'),-50>k&&(k=-50),h(this),f.each(function(){var r=e(this);i(r);var a=this,l=a.id,f=-k+"%",h=100+2*k+"%",h={position:"absolute",top:f,left:f,display:"block",width:h,height:h,margin:0,padding:0,background:"#fff",border:0,opacity:0},f=_mobile?{position:"absolute",visibility:"hidden"}:k?h:{position:"absolute",opacity:0},g="checkbox"==a[_type]?m.checkboxClass||"icheckbox":m.radioClass||"i"+c,w=e(_label+'[for="'+l+'"]').add(r.closest(_label)),N=!!m.aria,E=s+"-"+Math.random().toString(36).substr(2,6),S='<div class="'+g+'" '+(N?'role="'+a[_type]+'" ':"");N&&w.each(function(){S+='aria-labelledby="',this.id?S+=this.id:(this.id=E,S+=E),S+='"'}),S=r.wrap(S+"/>")[_callback]("ifCreated").parent().append(m.insert),h=e('<ins class="'+d+'"/>').css(h).appendTo(S),r.data(s,{o:m,s:r.attr("style")}).css(f),m.inheritClass&&S[_add](a.className||""),m.inheritID&&l&&S.attr("id",s+"-"+l),"static"==S.css("position")&&S.css("position","relative"),t(r,!0,_update),w.length&&w.on(_click+".i mouseover.i mouseout.i "+_touch,function(n){var o=n[_type],i=e(this);if(!a[p]){if(o==_click){if(e(n.target).is("a"))return;t(r,!1,!0)}else C&&(/ut|nd/.test(o)?(S[_remove](v),i[_remove](x)):(S[_add](v),i[_add](x)));if(!_mobile)return!1;n.stopPropagation()}}),r.on(_click+".i focus.i blur.i keyup.i keydown.i keypress.i",function(e){var t=e[_type];return e=e.keyCode,t==_click?!1:"keydown"==t&&32==e?(a[_type]==c&&a[u]||(a[u]?o(r,u):n(r,u)),!1):void("keyup"==t&&a[_type]==c?!a[u]&&n(r,u):/us|ur/.test(t)&&S["blur"==t?_remove:_add](b))}),h.on(_click+" mousedown mouseup mouseover mouseout "+_touch,function(e){var n=e[_type],o=/wn|up/.test(n)?y:v;if(!a[p]){if(n==_click?t(r,!1,!0):(/wn|er|in/.test(n)?S[_add](o):S[_remove](o+" "+y),w.length&&C&&o==v&&w[/ut|nd/.test(n)?_remove:_add](x)),!_mobile)return!1;e.stopPropagation()}})})}}(window.jQuery||window.Zepto),function(e){"use strict";"function"==typeof define&&define.amd?define(e):"undefined"!=typeof module&&"undefined"!=typeof module.exports?module.exports=e():"undefined"!=typeof Package?Sortable=e():window.Sortable=e()}(function(){"use strict";function e(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be HTMLElement, and not "+{}.toString.call(e);this.el=e,this.options=t=v({},t),e[R]=this;var n={group:Math.random(),sort:!0,disabled:!1,store:null,handle:null,scroll:!0,scrollSensitivity:30,scrollSpeed:10,draggable:/[uo]l/i.test(e.nodeName)?"li":">*",ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",ignore:"a, img",filter:null,animation:0,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1};for(var o in n)!(o in t)&&(t[o]=n[o]);X(t);for(var r in this)"_"===r.charAt(0)&&(this[r]=this[r].bind(this));this.nativeDraggable=t.forceFallback?!1:B,i(e,"mousedown",this._onTapStart),i(e,"touchstart",this._onTapStart),this.nativeDraggable&&(i(e,"dragover",this),i(e,"dragenter",this)),j.push(this._onDragOver),t.store&&this.sort(t.store.get(this))}function t(e){x&&x.state!==e&&(l(x,"display",e?"none":""),!e&&x.state&&k.insertBefore(x,b),x.state=e)}function n(e,t,n){if(e){n=n||H,t=t.split(".");var o=t.shift().toUpperCase(),i=new RegExp("\\s("+t.join("|")+")(?=\\s)","g");do if(">*"===o&&e.parentNode===n||(""===o||e.nodeName.toUpperCase()==o)&&(!t.length||((" "+e.className+" ").match(i)||[]).length==t.length))return e;while(e!==n&&(e=e.parentNode))}return null}function o(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.preventDefault()}function i(e,t,n){e.addEventListener(t,n,!1)}function r(e,t,n){e.removeEventListener(t,n,!1)}function a(e,t,n){if(e)if(e.classList)e.classList[n?"add":"remove"](t);else{var o=(" "+e.className+" ").replace(P," ").replace(" "+t+" "," ");e.className=(o+(n?" "+t:"")).replace(P," ")}}function l(e,t,n){var o=e&&e.style;if(o){if(void 0===n)return H.defaultView&&H.defaultView.getComputedStyle?n=H.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),void 0===t?n:n[t];t in o||(t="-webkit-"+t),o[t]=n+("string"==typeof n?"":"px")}}function s(e,t,n){if(e){var o=e.getElementsByTagName(t),i=0,r=o.length;if(n)for(;r>i;i++)n(o[i],i);return o}return[]}function d(e,t,n,o,i,r,a){var l=H.createEvent("Event"),s=(e||t[R]).options,d="on"+n.charAt(0).toUpperCase()+n.substr(1);l.initEvent(n,!0,!0),l.to=t,l.from=i||t,l.item=o||t,l.clone=x,l.oldIndex=r,l.newIndex=a,t.dispatchEvent(l),s[d]&&s[d].call(e,l)}function c(e,t,n,o,i,r){var a,l,s=e[R],d=s.options.onMove;return a=H.createEvent("Event"),a.initEvent("move",!0,!0),a.to=t,a.from=e,a.dragged=n,a.draggedRect=o,a.related=i||t,a.relatedRect=r||t.getBoundingClientRect(),e.dispatchEvent(a),d&&(l=d.call(s,a)),l}function u(e){e.draggable=!1}function f(){z=!1}function p(e,t){var n=e.lastElementChild,o=n.getBoundingClientRect();return(t.clientY-(o.top+o.height)>5||t.clientX-(o.right+o.width)>5)&&n}function h(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,o=0;n--;)o+=t.charCodeAt(n);return o.toString(36)}function m(e){var t=0;if(!e||!e.parentNode)return-1;for(;e&&(e=e.previousElementSibling);)"TEMPLATE"!==e.nodeName.toUpperCase()&&t++;return t}function g(e,t){var n,o;return function(){void 0===n&&(n=arguments,o=this,setTimeout(function(){1===n.length?e.call(o,n[0]):e.apply(o,n),n=void 0},t))}}function v(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}var b,y,C,x,k,w,N,E,S,T,$,D,M,A,I,F,L,O={},P=/\s+/g,R="Sortable"+(new Date).getTime(),_=window,H=_.document,V=_.parseInt,B=!!("draggable"in H.createElement("div")),U=function(e){return e=H.createElement("x"),e.style.cssText="pointer-events:auto","auto"===e.style.pointerEvents}(),z=!1,K=Math.abs,j=([].slice,[]),Y=g(function(e,t,n){if(n&&t.scroll){var o,i,r,a,l=t.scrollSensitivity,s=t.scrollSpeed,d=e.clientX,c=e.clientY,u=window.innerWidth,f=window.innerHeight;if(E!==n&&(N=t.scroll,E=n,N===!0)){N=n;do if(N.offsetWidth<N.scrollWidth||N.offsetHeight<N.scrollHeight)break;while(N=N.parentNode)}N&&(o=N,i=N.getBoundingClientRect(),r=(K(i.right-d)<=l)-(K(i.left-d)<=l),a=(K(i.bottom-c)<=l)-(K(i.top-c)<=l)),r||a||(r=(l>=u-d)-(l>=d),a=(l>=f-c)-(l>=c),(r||a)&&(o=_)),O.vx===r&&O.vy===a&&O.el===o||(O.el=o,O.vx=r,O.vy=a,clearInterval(O.pid),o&&(O.pid=setInterval(function(){o===_?_.scrollTo(_.pageXOffset+r*s,_.pageYOffset+a*s):(a&&(o.scrollTop+=a*s),r&&(o.scrollLeft+=r*s))},24)))}},30),X=function(e){var t=e.group;t&&"object"==typeof t||(t=e.group={name:t}),["pull","put"].forEach(function(e){e in t||(t[e]=!0)}),e.groups=" "+t.name+(t.put.join?" "+t.put.join(" "):"")+" "};return e.prototype={constructor:e,_onTapStart:function(e){var t=this,o=this.el,i=this.options,r=e.type,a=e.touches&&e.touches[0],l=(a||e).target,s=l,c=i.filter;if(!("mousedown"===r&&0!==e.button||i.disabled)&&(l=n(l,i.draggable,o))){if(D=m(l),"function"==typeof c){if(c.call(this,e,l,this))return d(t,s,"filter",l,o,D),void e.preventDefault()}else if(c&&(c=c.split(",").some(function(e){return e=n(s,e.trim(),o),e?(d(t,e,"filter",l,o,D),!0):void 0})))return void e.preventDefault();i.handle&&!n(s,i.handle,o)||this._prepareDragStart(e,a,l)}},_prepareDragStart:function(e,t,n){var o,r=this,l=r.el,d=r.options,c=l.ownerDocument;n&&!b&&n.parentNode===l&&(I=e,k=l,b=n,y=b.parentNode,w=b.nextSibling,A=d.group,o=function(){r._disableDelayedDrag(),b.draggable=!0,a(b,r.options.chosenClass,!0),r._triggerDragStart(t)},d.ignore.split(",").forEach(function(e){s(b,e.trim(),u)}),i(c,"mouseup",r._onDrop),i(c,"touchend",r._onDrop),i(c,"touchcancel",r._onDrop),d.delay?(i(c,"mouseup",r._disableDelayedDrag),i(c,"touchend",r._disableDelayedDrag),i(c,"touchcancel",r._disableDelayedDrag),i(c,"mousemove",r._disableDelayedDrag),i(c,"touchmove",r._disableDelayedDrag),r._dragStartTimer=setTimeout(o,d.delay)):o())},_disableDelayedDrag:function(){var e=this.el.ownerDocument;clearTimeout(this._dragStartTimer),r(e,"mouseup",this._disableDelayedDrag),r(e,"touchend",this._disableDelayedDrag),r(e,"touchcancel",this._disableDelayedDrag),r(e,"mousemove",this._disableDelayedDrag),r(e,"touchmove",this._disableDelayedDrag)},_triggerDragStart:function(e){e?(I={target:b,clientX:e.clientX,clientY:e.clientY},this._onDragStart(I,"touch")):this.nativeDraggable?(i(b,"dragend",this),i(k,"dragstart",this._onDragStart)):this._onDragStart(I,!0);try{H.selection?H.selection.empty():window.getSelection().removeAllRanges()}catch(t){}},_dragStarted:function(){k&&b&&(a(b,this.options.ghostClass,!0),e.active=this,d(this,k,"start",b,k,D))},_emulateDragOver:function(){if(F){if(this._lastX===F.clientX&&this._lastY===F.clientY)return;this._lastX=F.clientX,this._lastY=F.clientY,U||l(C,"display","none");var e=H.elementFromPoint(F.clientX,F.clientY),t=e,n=" "+this.options.group.name,o=j.length;if(t)do{if(t[R]&&t[R].options.groups.indexOf(n)>-1){for(;o--;)j[o]({clientX:F.clientX,clientY:F.clientY,target:e,rootEl:t});break}e=t}while(t=t.parentNode);U||l(C,"display","")}},_onTouchMove:function(t){if(I){e.active||this._dragStarted(),this._appendGhost();var n=t.touches?t.touches[0]:t,o=n.clientX-I.clientX,i=n.clientY-I.clientY,r=t.touches?"translate3d("+o+"px,"+i+"px,0)":"translate("+o+"px,"+i+"px)";L=!0,F=n,l(C,"webkitTransform",r),l(C,"mozTransform",r),l(C,"msTransform",r),l(C,"transform",r),t.preventDefault()}},_appendGhost:function(){if(!C){var e,t=b.getBoundingClientRect(),n=l(b),o=this.options;C=b.cloneNode(!0),a(C,o.ghostClass,!1),a(C,o.fallbackClass,!0),l(C,"top",t.top-V(n.marginTop,10)),l(C,"left",t.left-V(n.marginLeft,10)),l(C,"width",t.width),l(C,"height",t.height),l(C,"opacity","0.8"),l(C,"position","fixed"),l(C,"zIndex","100000"),l(C,"pointerEvents","none"),o.fallbackOnBody&&H.body.appendChild(C)||k.appendChild(C),e=C.getBoundingClientRect(),l(C,"width",2*t.width-e.width),l(C,"height",2*t.height-e.height)}},_onDragStart:function(e,t){var n=e.dataTransfer,o=this.options;this._offUpEvents(),"clone"==A.pull&&(x=b.cloneNode(!0),l(x,"display","none"),k.insertBefore(x,b)),t?("touch"===t?(i(H,"touchmove",this._onTouchMove),i(H,"touchend",this._onDrop),i(H,"touchcancel",this._onDrop)):(i(H,"mousemove",this._onTouchMove),i(H,"mouseup",this._onDrop)),this._loopId=setInterval(this._emulateDragOver,50)):(n&&(n.effectAllowed="move",o.setData&&o.setData.call(this,n,b)),i(H,"drop",this),setTimeout(this._dragStarted,0))},_onDragOver:function(e){var o,i,r,a=this.el,s=this.options,d=s.group,u=d.put,h=A===d,m=s.sort;if(void 0!==e.preventDefault&&(e.preventDefault(),!s.dragoverBubble&&e.stopPropagation()),L=!0,A&&!s.disabled&&(h?m||(r=!k.contains(b)):A.pull&&u&&(A.name===d.name||u.indexOf&&~u.indexOf(A.name)))&&(void 0===e.rootEl||e.rootEl===this.el)){if(Y(e,s,this.el),z)return;if(o=n(e.target,s.draggable,a),i=b.getBoundingClientRect(),r)return t(!0),void(x||w?k.insertBefore(b,x||w):m||k.appendChild(b));if(0===a.children.length||a.children[0]===C||a===e.target&&(o=p(a,e))){if(o){if(o.animated)return;v=o.getBoundingClientRect()}t(h),c(k,a,b,i,o,v)!==!1&&(b.contains(a)||(a.appendChild(b),y=a),this._animate(i,b),o&&this._animate(v,o))}else if(o&&!o.animated&&o!==b&&void 0!==o.parentNode[R]){S!==o&&(S=o,T=l(o),$=l(o.parentNode));var g,v=o.getBoundingClientRect(),N=v.right-v.left,E=v.bottom-v.top,D=/left|right|inline/.test(T.cssFloat+T.display)||"flex"==$.display&&0===$["flex-direction"].indexOf("row"),M=o.offsetWidth>b.offsetWidth,I=o.offsetHeight>b.offsetHeight,F=(D?(e.clientX-v.left)/N:(e.clientY-v.top)/E)>.5,O=o.nextElementSibling,P=c(k,a,b,i,o,v);if(P!==!1){if(z=!0,setTimeout(f,30),t(h),1===P||-1===P)g=1===P;else if(D){var _=b.offsetTop,H=o.offsetTop;g=_===H?o.previousElementSibling===b&&!M||F&&M:H>_}else g=O!==b&&!I||F&&I;b.contains(a)||(g&&!O?a.appendChild(b):o.parentNode.insertBefore(b,g?O:o)),y=b.parentNode,this._animate(i,b),this._animate(v,o)}}}},_animate:function(e,t){var n=this.options.animation;if(n){var o=t.getBoundingClientRect();l(t,"transition","none"),l(t,"transform","translate3d("+(e.left-o.left)+"px,"+(e.top-o.top)+"px,0)"),t.offsetWidth,l(t,"transition","all "+n+"ms"),l(t,"transform","translate3d(0,0,0)"),clearTimeout(t.animated),t.animated=setTimeout(function(){l(t,"transition",""),l(t,"transform",""),t.animated=!1},n)}},_offUpEvents:function(){var e=this.el.ownerDocument;r(H,"touchmove",this._onTouchMove),r(e,"mouseup",this._onDrop),r(e,"touchend",this._onDrop),r(e,"touchcancel",this._onDrop)},_onDrop:function(t){var n=this.el,o=this.options;clearInterval(this._loopId),clearInterval(O.pid),clearTimeout(this._dragStartTimer),r(H,"mousemove",this._onTouchMove),this.nativeDraggable&&(r(H,"drop",this),r(n,"dragstart",this._onDragStart)),this._offUpEvents(),t&&(L&&(t.preventDefault(),!o.dropBubble&&t.stopPropagation()),C&&C.parentNode.removeChild(C),b&&(this.nativeDraggable&&r(b,"dragend",this),u(b),a(b,this.options.ghostClass,!1),a(b,this.options.chosenClass,!1),k!==y?(M=m(b),M>=0&&(d(null,y,"sort",b,k,D,M),d(this,k,"sort",b,k,D,M),d(null,y,"add",b,k,D,M),d(this,k,"remove",b,k,D,M))):(x&&x.parentNode.removeChild(x),b.nextSibling!==w&&(M=m(b),M>=0&&(d(this,k,"update",b,k,D,M),d(this,k,"sort",b,k,D,M)))),e.active&&(null!==M&&-1!==M||(M=D),d(this,k,"end",b,k,D,M),this.save())),k=b=y=C=w=x=N=E=I=F=L=M=S=T=A=e.active=null)},handleEvent:function(e){var t=e.type;"dragover"===t||"dragenter"===t?b&&(this._onDragOver(e),o(e)):"drop"!==t&&"dragend"!==t||this._onDrop(e)},toArray:function(){for(var e,t=[],o=this.el.children,i=0,r=o.length,a=this.options;r>i;i++)e=o[i],n(e,a.draggable,this.el)&&t.push(e.getAttribute(a.dataIdAttr)||h(e));return t},sort:function(e){var t={},o=this.el;this.toArray().forEach(function(e,i){var r=o.children[i];n(r,this.options.draggable,o)&&(t[e]=r)},this),e.forEach(function(e){t[e]&&(o.removeChild(t[e]),o.appendChild(t[e]))})},save:function(){var e=this.options.store;e&&e.set(this)},closest:function(e,t){return n(e,t||this.options.draggable,this.el)},option:function(e,t){var n=this.options;return void 0===t?n[e]:(n[e]=t,void("group"===e&&X(n)))},destroy:function(){var e=this.el;e[R]=null,r(e,"mousedown",this._onTapStart),r(e,"touchstart",this._onTapStart),this.nativeDraggable&&(r(e,"dragover",this),r(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(e){e.removeAttribute("draggable")}),j.splice(j.indexOf(this._onDragOver),1),this._onDrop(),this.el=e=null}},e.utils={on:i,off:r,css:l,find:s,is:function(e,t){return!!n(e,t,e)},extend:v,throttle:g,closest:n,toggleClass:a,index:m},e.create=function(t,n){return new e(t,n)},e.version="1.4.2",e}),function(e){"use strict";"function"==typeof define&&define.amd?define(["angular","./Sortable"],e):"function"==typeof require&&"object"==typeof exports&&"object"==typeof module?(require("angular"),e(angular,require("./Sortable")),module.exports="ng-sortable"):window.angular&&window.Sortable&&e(angular,Sortable)}(function(e,t){"use strict";var n="Sortable:ng-sortable";e.module("ng-sortable",[]).constant("ngSortableVersion","0.4.0").constant("ngSortableConfig",{}).directive("ngSortable",["$parse","ngSortableConfig",function(o,i){var r,a,l=function(e,t){var n=[].filter.call(e.childNodes,function(e){return 8===e.nodeType&&-1!==e.nodeValue.indexOf("ngRepeat:")})[0];if(!n)return function(){return null};n=n.nodeValue.match(/ngRepeat:\s*(?:\(.*?,\s*)?([^\s)]+)[\s)]+in\s+([^\s|]+)/);var i=o(n[2]);return function(){return i(t.$parent)||[]}};return{restrict:"AC",scope:{ngSortable:"=?"},link:function(o,s){function d(e,t){var n="on"+e.type.charAt(0).toUpperCase()+e.type.substr(1),o=m();p[n]&&p[n]({model:t||o[e.newIndex],models:o,oldIndex:e.oldIndex,newIndex:e.newIndex})}function c(i){var l=m();if(l){var s=i.oldIndex,d=i.newIndex;if(f!==i.from){var c=i.from[n]();r=c[s],i.clone?(r=e.copy(r),c.splice(t.utils.index(i.clone),0,c.splice(s,1)[0]),i.from.removeChild(i.clone)):c.splice(s,1),l.splice(d,0,r),i.from.insertBefore(i.item,a)}else l.splice(d,0,l.splice(s,1)[0]);o.$apply()}}var u,f=s[0],p=e.extend(o.ngSortable||{},i),h=[],m=l(f,o);f[n]=m,u=t.create(f,Object.keys(p).reduce(function(e,t){return e[t]=e[t]||p[t],e},{onStart:function(e){a=e.from===e.item.parentNode?e.item.nextSibling:e.clone.nextSibling,d(e),o.$apply()},onEnd:function(e){d(e,r),o.$apply()},onAdd:function(e){c(e),d(e,r),o.$apply()},onUpdate:function(e){c(e),d(e)},onRemove:function(e){d(e,r)},onSort:function(e){d(e)}})),s.on("$destroy",function(){e.forEach(h,function(e){e()}),u.destroy(),f[n]=null,f=null,h=null,u=null,a=null}),e.forEach(["sort","disabled","draggable","handle","animation","group","ghostClass","filter","onStart","onEnd","onAdd","onUpdate","onRemove","onSort"],function(e){h.push(o.$watch("ngSortable."+e,function(t){void 0!==t&&(p[e]=t,/^on[A-Z]/.test(e)||u.option(e,t))}))})}}}])}),angular.module("summernote",[]).controller("SummernoteController",["$scope","$attrs","$timeout",function(e,t,n){"use strict";var o,i=e.summernoteConfig||{};if(angular.isDefined(t.height)&&(i.height=t.height),angular.isDefined(t.focus)&&(i.focus=!0),angular.isDefined(t.airmode)&&(i.airMode=!0),angular.isDefined(t.lang)){if(!angular.isDefined($.summernote.lang[t.lang]))throw new Error('"'+t.lang+'" lang file must be exist.');i.lang=t.lang}i.oninit=e.init,i.onenter=function(t){e.enter({evt:t})},i.onfocus=function(t){e.focus({evt:t})},i.onblur=function(t){e.blur({evt:t})},i.onpaste=function(t){e.paste({evt:t})},i.onkeyup=function(t){e.keyup({evt:t})},i.onkeydown=function(t){e.keydown({evt:t})},angular.isDefined(t.onImageUpload)&&(i.onImageUpload=function(t,n){e.imageUpload({files:t,editor:n,editable:e.editable})}),this.activate=function(r,a,l){var s=function(){var e=a.code();l&&l.$viewValue!==e&&n(function(){l.$setViewValue(e)},0)};i.onChange=function(t){s(),e.change({contents:t,editable:e.editable})},a.summernote(i);var d,c=a.next(".note-editor");c.find(".note-toolbar").click(function(){s(),c.hasClass("codeview")?(c.on("keyup",s),l&&(d=r.$watch(function(){return l.$modelValue},function(e){c.find(".note-codable").val(e)}))):(c.off("keyup",s),angular.isFunction(d)&&d())}),l&&(l.$render=function(){a.code(l.$viewValue||"")}),angular.isDefined(t.editable)&&(e.editable=c.find(".note-editable")),o=a,a.on("$destroy",function(){a.destroy(),e.summernoteDestroyed=!0})},e.$on("$destroy",function(){e.summernoteDestroyed||o.destroy()})}]).directive("summernote",[function(){"use strict";return{restrict:"EA",transclude:!0,replace:!0,require:["summernote","^?ngModel"],controller:"SummernoteController",scope:{summernoteConfig:"=config",editable:"=",init:"&onInit",enter:"&onEnter",focus:"&onFocus",blur:"&onBlur",paste:"&onPaste",keyup:"&onKeyup",keydown:"&onKeydown",change:"&onChange",imageUpload:"&onImageUpload"},template:'<div class="summernote"></div>',link:function(e,t,n,o){var i=o[0],r=o[1];i.activate(e,t,r)}}}]),!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(window.jQuery)}(function(e){Array.prototype.reduce||(Array.prototype.reduce=function(e){var t,n=Object(this),o=n.length>>>0,i=0;if(2===arguments.length)t=arguments[1];else{for(;o>i&&!(i in n);)i++;if(i>=o)throw new TypeError("Reduce of empty array with no initial value");t=n[i++]}for(;o>i;i++)i in n&&(t=e(t,n[i],i,n));return t}),"function"!=typeof Array.prototype.filter&&(Array.prototype.filter=function(e){for(var t=Object(this),n=t.length>>>0,o=[],i=arguments.length>=2?arguments[1]:void 0,r=0;n>r;r++)if(r in t){var a=t[r];e.call(i,a,r,t)&&o.push(a)}return o});var t,n="function"==typeof define&&define.amd,o=function(t){var n="Comic Sans MS"===t?"Courier New":"Comic Sans MS",o=e("<div>").css({position:"absolute",left:"-9999px",top:"-9999px",fontSize:"200px"}).text("mmmmmmmmmwwwwwww").appendTo(document.body),i=o.css("fontFamily",n).width(),r=o.css("fontFamily",t+","+n).width();return o.remove(),i!==r},i={isMac:navigator.appVersion.indexOf("Mac")>-1,isMSIE:navigator.userAgent.indexOf("MSIE")>-1||navigator.userAgent.indexOf("Trident")>-1,isFF:navigator.userAgent.indexOf("Firefox")>-1,jqueryVersion:parseFloat(e.fn.jquery),isSupportAmd:n,hasCodeMirror:n?require.specified("CodeMirror"):!!window.CodeMirror,isFontInstalled:o,isW3CRangeSupport:!!document.createRange},r=function(){var t=function(e){return function(t){return e===t}},n=function(e,t){return e===t},o=function(e){return function(t,n){return t[e]===n[e]}},i=function(){return!0},r=function(){return!1},a=function(e){return function(){return!e.apply(e,arguments)}},l=function(e,t){return function(n){return e(n)&&t(n)}},s=function(e){return e},d=0,c=function(e){var t=++d+"";return e?e+t:t},u=function(t){var n=e(document);return{top:t.top+n.scrollTop(),left:t.left+n.scrollLeft(),width:t.right-t.left,height:t.bottom-t.top}},f=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t};return{eq:t,eq2:n,peq2:o,ok:i,fail:r,self:s,not:a,and:l,uniqueId:c,rect2bnd:u,invertObject:f}}(),a=function(){var t=function(e){return e[0]},n=function(e){return e[e.length-1]},o=function(e){return e.slice(0,e.length-1)},i=function(e){return e.slice(1)},a=function(e,t){for(var n=0,o=e.length;o>n;n++){var i=e[n];if(t(i))return i}},l=function(e,t){for(var n=0,o=e.length;o>n;n++)if(!t(e[n]))return!1;return!0},s=function(t,n){return-1!==e.inArray(n,t)},d=function(e,t){return t=t||r.self,e.reduce(function(e,n){return e+t(n)},0)},c=function(e){for(var t=[],n=-1,o=e.length;++n<o;)t[n]=e[n];return t},u=function(e,o){if(!e.length)return[];var r=i(e);return r.reduce(function(e,t){var i=n(e);return o(n(i),t)?i[i.length]=t:e[e.length]=[t],e},[[t(e)]])},f=function(e){for(var t=[],n=0,o=e.length;o>n;n++)e[n]&&t.push(e[n]);return t},p=function(e){for(var t=[],n=0,o=e.length;o>n;n++)s(t,e[n])||t.push(e[n]);return t},h=function(e,t){var n=e.indexOf(t);return-1===n?null:e[n+1];
},m=function(e,t){var n=e.indexOf(t);return-1===n?null:e[n-1]};return{head:t,last:n,initial:o,tail:i,prev:m,next:h,find:a,contains:s,all:l,sum:d,from:c,clusterBy:u,compact:f,unique:p}}(),l=String.fromCharCode(160),s="\ufeff",d=function(){var t=function(t){return t&&e(t).hasClass("note-editable")},n=function(t){return t&&e(t).hasClass("note-control-sizing")},o=function(t){var n;if(t.hasClass("note-air-editor")){var o=a.last(t.attr("id").split("-"));return n=function(t){return function(){return e(t+o)}},{editor:function(){return t},holder:function(){return t.data("holder")},editable:function(){return t},popover:n("#note-popover-"),handle:n("#note-handle-"),dialog:n("#note-dialog-")}}return n=function(e){return function(){return t.find(e)}},{editor:function(){return t},holder:function(){return t.data("holder")},dropzone:n(".note-dropzone"),toolbar:n(".note-toolbar"),editable:n(".note-editable"),codable:n(".note-codable"),statusbar:n(".note-statusbar"),popover:n(".note-popover"),handle:n(".note-handle"),dialog:n(".note-dialog")}},c=function(t){var n=e(t).closest(".note-editor, .note-air-editor, .note-air-layout");if(!n.length)return null;var i;return i=n.is(".note-editor, .note-air-editor")?n:e("#note-editor-"+a.last(n.attr("id").split("-"))),o(i)},u=function(e){return e=e.toUpperCase(),function(t){return t&&t.nodeName.toUpperCase()===e}},f=function(e){return e&&3===e.nodeType},p=function(e){return e&&/^BR|^IMG|^HR/.test(e.nodeName.toUpperCase())},h=function(e){return t(e)?!1:e&&/^DIV|^P|^LI|^H[1-7]/.test(e.nodeName.toUpperCase())},m=u("LI"),g=function(e){return h(e)&&!m(e)},v=u("TABLE"),b=function(e){return!(k(e)||y(e)||h(e)||v(e)||x(e))},y=function(e){return e&&/^UL|^OL/.test(e.nodeName.toUpperCase())},C=function(e){return e&&/^TD|^TH/.test(e.nodeName.toUpperCase())},x=u("BLOCKQUOTE"),k=function(e){return C(e)||x(e)||t(e)},w=u("A"),N=function(e){return b(e)&&!!F(e,h)},E=function(e){return b(e)&&!F(e,h)},S=u("BODY"),T=function(e,t){return e.nextSibling===t||e.previousSibling===t},$=function(e,t){t=t||r.ok;var n=[];return e.previousSibling&&t(e.previousSibling)&&n.push(e.previousSibling),n.push(e),e.nextSibling&&t(e.nextSibling)&&n.push(e.nextSibling),n},D=i.isMSIE?"&nbsp;":"<br>",M=function(e){return f(e)?e.nodeValue.length:e.childNodes.length},A=function(e){var t=M(e);return 0===t?!0:!d.isText(e)&&1===t&&e.innerHTML===D},I=function(e){p(e)||M(e)||(e.innerHTML=D)},F=function(e,n){for(;e;){if(n(e))return e;if(t(e))break;e=e.parentNode}return null},L=function(e,n){for(e=e.parentNode;e&&1===M(e);){if(n(e))return e;if(t(e))break;e=e.parentNode}return null},O=function(e,n){n=n||r.fail;var o=[];return F(e,function(e){return t(e)||o.push(e),n(e)}),o},P=function(e,t){var n=O(e);return a.last(n.filter(t))},R=function(t,n){for(var o=O(t),i=n;i;i=i.parentNode)if(e.inArray(i,o)>-1)return i;return null},_=function(e,t){t=t||r.fail;for(var n=[];e&&!t(e);)n.push(e),e=e.previousSibling;return n},H=function(e,t){t=t||r.fail;for(var n=[];e&&!t(e);)n.push(e),e=e.nextSibling;return n},V=function(e,t){var n=[];return t=t||r.ok,function o(i){e!==i&&t(i)&&n.push(i);for(var r=0,a=i.childNodes.length;a>r;r++)o(i.childNodes[r])}(e),n},B=function(t,n){var o=t.parentNode,i=e("<"+n+">")[0];return o.insertBefore(i,t),i.appendChild(t),i},U=function(e,t){var n=t.nextSibling,o=t.parentNode;return n?o.insertBefore(e,n):o.appendChild(e),e},z=function(t,n){return e.each(n,function(e,n){t.appendChild(n)}),t},K=function(e){return 0===e.offset},j=function(e){return e.offset===M(e.node)},Y=function(e){return K(e)||j(e)},X=function(e,t){for(;e&&e!==t;){if(0!==W(e))return!1;e=e.parentNode}return!0},q=function(e,t){for(;e&&e!==t;){if(W(e)!==M(e.parentNode)-1)return!1;e=e.parentNode}return!0},W=function(e){for(var t=0;e=e.previousSibling;)t+=1;return t},G=function(e){return!!(e&&e.childNodes&&e.childNodes.length)},Z=function(e,n){var o,i;if(0===e.offset){if(t(e.node))return null;o=e.node.parentNode,i=W(e.node)}else G(e.node)?(o=e.node.childNodes[e.offset-1],i=M(o)):(o=e.node,i=n?0:e.offset-1);return{node:o,offset:i}},J=function(e,n){var o,i;if(M(e.node)===e.offset){if(t(e.node))return null;o=e.node.parentNode,i=W(e.node)+1}else G(e.node)?(o=e.node.childNodes[e.offset],i=0):(o=e.node,i=n?M(e.node):e.offset+1);return{node:o,offset:i}},Q=function(e,t){return e.node===t.node&&e.offset===t.offset},ee=function(e){if(f(e.node)||!G(e.node)||A(e.node))return!0;var t=e.node.childNodes[e.offset-1],n=e.node.childNodes[e.offset];return!(t&&!p(t)||n&&!p(n))},te=function(e,t){for(;e;){if(t(e))return e;e=Z(e)}return null},ne=function(e,t){for(;e;){if(t(e))return e;e=J(e)}return null},oe=function(e,t,n,o){for(var i=e;i&&(n(i),!Q(i,t));){var r=o&&e.node!==i.node&&t.node!==i.node;i=J(i,r)}},ie=function(t,n){var o=O(n,r.eq(t));return e.map(o,W).reverse()},re=function(e,t){for(var n=e,o=0,i=t.length;i>o;o++)n=n.childNodes.length<=t[o]?n.childNodes[n.childNodes.length-1]:n.childNodes[t[o]];return n},ae=function(e,t){if(f(e.node))return K(e)?e.node:j(e)?e.node.nextSibling:e.node.splitText(e.offset);var n=e.node.childNodes[e.offset],o=U(e.node.cloneNode(!1),e.node);return z(o,H(n)),t||(I(e.node),I(o)),o},le=function(e,t,n){var o=O(t.node,r.eq(e));return o.length?1===o.length?ae(t,n):o.reduce(function(e,o){var i=U(o.cloneNode(!1),o);return e===t.node&&(e=ae(t,n)),z(i,H(e)),n||(I(o),I(i)),i}):null},se=function(e,t){var n,o,i=t?h:k,r=O(e.node,i),l=a.last(r)||e.node;i(l)?(n=r[r.length-2],o=l):(n=l,o=n.parentNode);var s=n&&le(n,e,t);return{rightNode:s,container:o}},de=function(e){return document.createElement(e)},ce=function(e){return document.createTextNode(e)},ue=function(e,t){if(e&&e.parentNode){if(e.removeNode)return e.removeNode(t);var n=e.parentNode;if(!t){var o,i,r=[];for(o=0,i=e.childNodes.length;i>o;o++)r.push(e.childNodes[o]);for(o=0,i=r.length;i>o;o++)n.insertBefore(r[o],e)}n.removeChild(e)}},fe=function(e,n){for(;e&&!t(e)&&n(e);){var o=e.parentNode;ue(e),e=o}},pe=function(e,t){if(e.nodeName.toUpperCase()===t.toUpperCase())return e;var n=de(t);return e.style.cssText&&(n.style.cssText=e.style.cssText),z(n,a.from(e.childNodes)),U(n,e),ue(e),n},he=u("TEXTAREA"),me=function(t,n){var o=he(t[0])?t.val():t.html();if(n){var i=/<(\/?)(\b(?!!)[^>\s]*)(.*?)(\s*\/?>)/g;o=o.replace(i,function(e,t,n){n=n.toUpperCase();var o=/^DIV|^TD|^TH|^P|^LI|^H[1-7]/.test(n)&&!!t,i=/^BLOCKQUOTE|^TABLE|^TBODY|^TR|^HR|^UL|^OL/.test(n);return e+(o||i?"\n":"")}),o=e.trim(o)}return o},ge=function(e,t){var n=e.val();return t?n.replace(/[\n\r]/g,""):n};return{NBSP_CHAR:l,ZERO_WIDTH_NBSP_CHAR:s,blank:D,emptyPara:"<p>"+D+"</p>",makePredByNodeName:u,isEditable:t,isControlSizing:n,buildLayoutInfo:o,makeLayoutInfo:c,isText:f,isVoid:p,isPara:h,isPurePara:g,isInline:b,isBodyInline:E,isBody:S,isParaInline:N,isList:y,isTable:v,isCell:C,isBlockquote:x,isBodyContainer:k,isAnchor:w,isDiv:u("DIV"),isLi:m,isBR:u("BR"),isSpan:u("SPAN"),isB:u("B"),isU:u("U"),isS:u("S"),isI:u("I"),isImg:u("IMG"),isTextarea:he,isEmpty:A,isEmptyAnchor:r.and(w,A),isClosestSibling:T,withClosestSiblings:$,nodeLength:M,isLeftEdgePoint:K,isRightEdgePoint:j,isEdgePoint:Y,isLeftEdgeOf:X,isRightEdgeOf:q,prevPoint:Z,nextPoint:J,isSamePoint:Q,isVisiblePoint:ee,prevPointUntil:te,nextPointUntil:ne,walkPoint:oe,ancestor:F,singleChildAncestor:L,listAncestor:O,lastAncestor:P,listNext:H,listPrev:_,listDescendant:V,commonAncestor:R,wrap:B,insertAfter:U,appendChildNodes:z,position:W,hasChildren:G,makeOffsetPath:ie,fromOffsetPath:re,splitTree:le,splitPoint:se,create:de,createText:ce,remove:ue,removeWhile:fe,replace:pe,html:me,value:ge}}(),c=function(){var t=function(e,t){var n,o,i=e.parentElement(),r=document.body.createTextRange(),l=a.from(i.childNodes);for(n=0;n<l.length;n++)if(!d.isText(l[n])){if(r.moveToElementText(l[n]),r.compareEndPoints("StartToStart",e)>=0)break;o=l[n]}if(0!==n&&d.isText(l[n-1])){var s=document.body.createTextRange(),c=null;s.moveToElementText(o||i),s.collapse(!o),c=o?o.nextSibling:i.firstChild;var u=e.duplicate();u.setEndPoint("StartToStart",s);for(var f=u.text.replace(/[\r\n]/g,"").length;f>c.nodeValue.length&&c.nextSibling;)f-=c.nodeValue.length,c=c.nextSibling;c.nodeValue,t&&c.nextSibling&&d.isText(c.nextSibling)&&f===c.nodeValue.length&&(f-=c.nodeValue.length,c=c.nextSibling),i=c,n=f}return{cont:i,offset:n}},n=function(e){var t=function(e,n){var o,i;if(d.isText(e)){var l=d.listPrev(e,r.not(d.isText)),s=a.last(l).previousSibling;o=s||e.parentNode,n+=a.sum(a.tail(l),d.nodeLength),i=!s}else{if(o=e.childNodes[n]||e,d.isText(o))return t(o,0);n=0,i=!1}return{node:o,collapseToStart:i,offset:n}},n=document.body.createTextRange(),o=t(e.node,e.offset);return n.moveToElementText(o.node),n.collapse(o.collapseToStart),n.moveStart("character",o.offset),n},o=function(t,l,s,c){this.sc=t,this.so=l,this.ec=s,this.eo=c;var u=function(){if(i.isW3CRangeSupport){var e=document.createRange();return e.setStart(t,l),e.setEnd(s,c),e}var o=n({node:t,offset:l});return o.setEndPoint("EndToEnd",n({node:s,offset:c})),o};this.getPoints=function(){return{sc:t,so:l,ec:s,eo:c}},this.getStartPoint=function(){return{node:t,offset:l}},this.getEndPoint=function(){return{node:s,offset:c}},this.select=function(){var e=u();if(i.isW3CRangeSupport){var t=document.getSelection();t.rangeCount>0&&t.removeAllRanges(),t.addRange(e)}else e.select()},this.normalize=function(){var e=function(e){return d.isVisiblePoint(e)||(e=d.isLeftEdgePoint(e)?d.nextPointUntil(e,d.isVisiblePoint):d.prevPointUntil(e,d.isVisiblePoint)),e},t=e(this.getStartPoint()),n=e(this.getEndPoint());return new o(t.node,t.offset,n.node,n.offset)},this.nodes=function(e,t){e=e||r.ok;var n=t&&t.includeAncestor,o=t&&t.fullyContains,i=this.getStartPoint(),l=this.getEndPoint(),s=[],c=[];return d.walkPoint(i,l,function(t){if(!d.isEditable(t.node)){var i;o?(d.isLeftEdgePoint(t)&&c.push(t.node),d.isRightEdgePoint(t)&&a.contains(c,t.node)&&(i=t.node)):i=n?d.ancestor(t.node,e):t.node,i&&e(i)&&s.push(i)}},!0),a.unique(s)},this.commonAncestor=function(){return d.commonAncestor(t,s)},this.expand=function(e){var n=d.ancestor(t,e),i=d.ancestor(s,e);if(!n&&!i)return new o(t,l,s,c);var r=this.getPoints();return n&&(r.sc=n,r.so=0),i&&(r.ec=i,r.eo=d.nodeLength(i)),new o(r.sc,r.so,r.ec,r.eo)},this.collapse=function(e){return e?new o(t,l,t,l):new o(s,c,s,c)},this.splitText=function(){var e=t===s,n=this.getPoints();return d.isText(s)&&!d.isEdgePoint(this.getEndPoint())&&s.splitText(c),d.isText(t)&&!d.isEdgePoint(this.getStartPoint())&&(n.sc=t.splitText(l),n.so=0,e&&(n.ec=n.sc,n.eo=c-l)),new o(n.sc,n.so,n.ec,n.eo)},this.deleteContents=function(){if(this.isCollapsed())return this;var t=this.splitText(),n=t.nodes(null,{fullyContains:!0}),i=d.prevPointUntil(t.getStartPoint(),function(e){return!a.contains(n,e.node)}),r=[];return e.each(n,function(e,t){var n=t.parentNode;i.node!==n&&1===d.nodeLength(n)&&r.push(n),d.remove(t,!1)}),e.each(r,function(e,t){d.remove(t,!1)}),new o(i.node,i.offset,i.node,i.offset).normalize()};var f=function(e){return function(){var n=d.ancestor(t,e);return!!n&&n===d.ancestor(s,e)}};this.isOnEditable=f(d.isEditable),this.isOnList=f(d.isList),this.isOnAnchor=f(d.isAnchor),this.isOnCell=f(d.isCell),this.isLeftEdgeOf=function(e){if(!d.isLeftEdgePoint(this.getStartPoint()))return!1;var t=d.ancestor(this.sc,e);return t&&d.isLeftEdgeOf(this.sc,t)},this.isCollapsed=function(){return t===s&&l===c},this.wrapBodyInlineWithPara=function(){if(d.isBodyContainer(t)&&d.isEmpty(t))return t.innerHTML=d.emptyPara,new o(t.firstChild,0,t.firstChild,0);if(d.isParaInline(t)||d.isPara(t))return this.normalize();var e;if(d.isInline(t)){var n=d.listAncestor(t,r.not(d.isInline));e=a.last(n),d.isInline(e)||(e=n[n.length-2]||t.childNodes[l])}else e=t.childNodes[l>0?l-1:0];var i=d.listPrev(e,d.isParaInline).reverse();if(i=i.concat(d.listNext(e.nextSibling,d.isParaInline)),i.length){var s=d.wrap(a.head(i),"p");d.appendChildNodes(s,a.tail(i))}return this.normalize()},this.insertNode=function(e){var t=this.wrapBodyInlineWithPara().deleteContents(),n=d.splitPoint(t.getStartPoint(),d.isInline(e));return n.rightNode?n.rightNode.parentNode.insertBefore(e,n.rightNode):n.container.appendChild(e),e},this.toString=function(){var e=u();return i.isW3CRangeSupport?e.toString():e.text},this.bookmark=function(e){return{s:{path:d.makeOffsetPath(e,t),offset:l},e:{path:d.makeOffsetPath(e,s),offset:c}}},this.paraBookmark=function(e){return{s:{path:a.tail(d.makeOffsetPath(a.head(e),t)),offset:l},e:{path:a.tail(d.makeOffsetPath(a.last(e),s)),offset:c}}},this.getClientRects=function(){var e=u();return e.getClientRects()}};return{create:function(e,n,r,a){if(arguments.length)2===arguments.length&&(r=e,a=n);else if(i.isW3CRangeSupport){var l=document.getSelection();if(0===l.rangeCount)return null;if(d.isBody(l.anchorNode))return null;var s=l.getRangeAt(0);e=s.startContainer,n=s.startOffset,r=s.endContainer,a=s.endOffset}else{var c=document.selection.createRange(),u=c.duplicate();u.collapse(!1);var f=c;f.collapse(!0);var p=t(f,!0),h=t(u,!1);d.isText(p.node)&&d.isLeftEdgePoint(p)&&d.isTextNode(h.node)&&d.isRightEdgePoint(h)&&h.node.nextSibling===p.node&&(p=h),e=p.cont,n=p.offset,r=h.cont,a=h.offset}return new o(e,n,r,a)},createFromNode:function(e){var t=e,n=0,o=e,i=d.nodeLength(o);return d.isVoid(t)&&(n=d.listPrev(t).length-1,t=t.parentNode),d.isBR(o)?(i=d.listPrev(o).length-1,o=o.parentNode):d.isVoid(o)&&(i=d.listPrev(o).length,o=o.parentNode),this.create(t,n,o,i)},createFromBookmark:function(e,t){var n=d.fromOffsetPath(e,t.s.path),i=t.s.offset,r=d.fromOffsetPath(e,t.e.path),a=t.e.offset;return new o(n,i,r,a)},createFromParaBookmark:function(e,t){var n=e.s.offset,i=e.e.offset,r=d.fromOffsetPath(a.head(t),e.s.path),l=d.fromOffsetPath(a.last(t),e.e.path);return new o(r,n,l,i)}}}(),u={version:"0.6.4",options:{width:null,height:null,minHeight:null,maxHeight:null,focus:!1,tabsize:4,styleWithSpan:!0,disableLinkTarget:!1,disableDragAndDrop:!1,disableResizeEditor:!1,shortcuts:!0,placeholder:!1,prettifyHtml:!0,iconPrefix:"fa fa-",codemirror:{mode:"text/html",htmlMode:!0,lineNumbers:!0},lang:"en-US",direction:null,toolbar:[["style",["style"]],["font",["bold","italic","underline","clear"]],["fontname",["fontname"]],["color",["color"]],["para",["ul","ol","paragraph"]],["height",["height"]],["table",["table"]],["insert",["link","picture","hr"]],["view",["fullscreen","codeview"]],["help",["help"]]],airMode:!1,airPopover:[["color",["color"]],["font",["bold","underline","clear"]],["para",["ul","paragraph"]],["table",["table"]],["insert",["link","picture"]]],styleTags:["p","blockquote","pre","h1","h2","h3","h4","h5","h6"],defaultFontName:"Helvetica Neue",fontNames:["Arial","Arial Black","Comic Sans MS","Courier New","Helvetica Neue","Helvetica","Impact","Lucida Grande","Tahoma","Times New Roman","Verdana"],fontNamesIgnoreCheck:[],colors:[["#000000","#424242","#636363","#9C9C94","#CEC6CE","#EFEFEF","#F7F7F7","#FFFFFF"],["#FF0000","#FF9C00","#FFFF00","#00FF00","#00FFFF","#0000FF","#9C00FF","#FF00FF"],["#F7C6CE","#FFE7CE","#FFEFC6","#D6EFD6","#CEDEE7","#CEE7F7","#D6D6E7","#E7D6DE"],["#E79C9C","#FFC69C","#FFE79C","#B5D6A5","#A5C6CE","#9CC6EF","#B5A5D6","#D6A5BD"],["#E76363","#F7AD6B","#FFD663","#94BD7B","#73A5AD","#6BADDE","#8C7BC6","#C67BA5"],["#CE0000","#E79439","#EFC631","#6BA54A","#4A7B8C","#3984C6","#634AA5","#A54A7B"],["#9C0000","#B56308","#BD9400","#397B21","#104A5A","#085294","#311873","#731842"],["#630000","#7B3900","#846300","#295218","#083139","#003163","#21104A","#4A1031"]],lineHeights:["1.0","1.2","1.4","1.5","1.6","1.8","2.0","3.0"],insertTableMaxSize:{col:10,row:10},maximumImageFileSize:null,oninit:null,onfocus:null,onblur:null,onenter:null,onkeyup:null,onkeydown:null,onImageUpload:null,onImageUploadError:null,onMediaDelete:null,onToolbarClick:null,onsubmit:null,onCreateLink:function(e){return-1!==e.indexOf("@")&&-1===e.indexOf(":")?e="mailto:"+e:-1===e.indexOf("://")&&(e="http://"+e),e},keyMap:{pc:{ENTER:"insertParagraph","CTRL+Z":"undo","CTRL+Y":"redo",TAB:"tab","SHIFT+TAB":"untab","CTRL+B":"bold","CTRL+I":"italic","CTRL+U":"underline","CTRL+SHIFT+S":"strikethrough","CTRL+BACKSLASH":"removeFormat","CTRL+SHIFT+L":"justifyLeft","CTRL+SHIFT+E":"justifyCenter","CTRL+SHIFT+R":"justifyRight","CTRL+SHIFT+J":"justifyFull","CTRL+SHIFT+NUM7":"insertUnorderedList","CTRL+SHIFT+NUM8":"insertOrderedList","CTRL+LEFTBRACKET":"outdent","CTRL+RIGHTBRACKET":"indent","CTRL+NUM0":"formatPara","CTRL+NUM1":"formatH1","CTRL+NUM2":"formatH2","CTRL+NUM3":"formatH3","CTRL+NUM4":"formatH4","CTRL+NUM5":"formatH5","CTRL+NUM6":"formatH6","CTRL+ENTER":"insertHorizontalRule","CTRL+K":"showLinkDialog"},mac:{ENTER:"insertParagraph","CMD+Z":"undo","CMD+SHIFT+Z":"redo",TAB:"tab","SHIFT+TAB":"untab","CMD+B":"bold","CMD+I":"italic","CMD+U":"underline","CMD+SHIFT+S":"strikethrough","CMD+BACKSLASH":"removeFormat","CMD+SHIFT+L":"justifyLeft","CMD+SHIFT+E":"justifyCenter","CMD+SHIFT+R":"justifyRight","CMD+SHIFT+J":"justifyFull","CMD+SHIFT+NUM7":"insertUnorderedList","CMD+SHIFT+NUM8":"insertOrderedList","CMD+LEFTBRACKET":"outdent","CMD+RIGHTBRACKET":"indent","CMD+NUM0":"formatPara","CMD+NUM1":"formatH1","CMD+NUM2":"formatH2","CMD+NUM3":"formatH3","CMD+NUM4":"formatH4","CMD+NUM5":"formatH5","CMD+NUM6":"formatH6","CMD+ENTER":"insertHorizontalRule","CMD+K":"showLinkDialog"}}},lang:{"en-US":{font:{bold:"Bold",italic:"Italic",underline:"Underline",clear:"Remove Font Style",height:"Line Height",name:"Font Family"},image:{image:"Picture",insert:"Insert Image",resizeFull:"Resize Full",resizeHalf:"Resize Half",resizeQuarter:"Resize Quarter",floatLeft:"Float Left",floatRight:"Float Right",floatNone:"Float None",shapeRounded:"Shape: Rounded",shapeCircle:"Shape: Circle",shapeThumbnail:"Shape: Thumbnail",shapeNone:"Shape: None",dragImageHere:"Drag image or text here",dropImage:"Drop image or Text",selectFromFiles:"Select from files",maximumFileSize:"Maximum file size",maximumFileSizeError:"Maximum file size exceeded.",url:"Image URL",remove:"Remove Image"},link:{link:"Link",insert:"Insert Link",unlink:"Unlink",edit:"Edit",textToDisplay:"Text to display",url:"To what URL should this link go?",openInNewWindow:"Open in new window"},table:{table:"Table"},hr:{insert:"Insert Horizontal Rule"},style:{style:"Style",normal:"Normal",blockquote:"Quote",pre:"Code",h1:"Header 1",h2:"Header 2",h3:"Header 3",h4:"Header 4",h5:"Header 5",h6:"Header 6"},lists:{unordered:"Unordered list",ordered:"Ordered list"},options:{help:"Help",fullscreen:"Full Screen",codeview:"Code View"},paragraph:{paragraph:"Paragraph",outdent:"Outdent",indent:"Indent",left:"Align left",center:"Align center",right:"Align right",justify:"Justify full"},color:{recent:"Recent Color",more:"More Color",background:"Background Color",foreground:"Foreground Color",transparent:"Transparent",setTransparent:"Set transparent",reset:"Reset",resetToDefault:"Reset to default"},shortcut:{shortcuts:"Keyboard shortcuts",close:"Close",textFormatting:"Text formatting",action:"Action",paragraphFormatting:"Paragraph formatting",documentStyle:"Document Style",extraKeys:"Extra keys"},history:{undo:"Undo",redo:"Redo"}}}},f=function(){var t=function(t){return e.Deferred(function(n){e.extend(new FileReader,{onload:function(e){var t=e.target.result;n.resolve(t)},onerror:function(){n.reject(this)}}).readAsDataURL(t)}).promise()},n=function(t,n){return e.Deferred(function(o){var i=e("<img>");i.one("load",function(){i.off("error abort"),o.resolve(i)}).one("error abort",function(){i.off("load").detach(),o.reject(i)}).css({display:"none"}).appendTo(document.body).attr({src:t,"data-filename":n})}).promise()};return{readFileAsDataURL:t,createImage:n}}(),p={isEdit:function(e){return a.contains([8,9,13,32],e)},nameFromCode:{8:"BACKSPACE",9:"TAB",13:"ENTER",32:"SPACE",48:"NUM0",49:"NUM1",50:"NUM2",51:"NUM3",52:"NUM4",53:"NUM5",54:"NUM6",55:"NUM7",56:"NUM8",66:"B",69:"E",73:"I",74:"J",75:"K",76:"L",82:"R",83:"S",85:"U",89:"Y",90:"Z",191:"SLASH",219:"LEFTBRACKET",220:"BACKSLASH",221:"RIGHTBRACKET"}},h=function(e){var t=[],n=-1,o=e[0],i=function(){var t=c.create(),n={s:{path:[],offset:0},e:{path:[],offset:0}};return{contents:e.html(),bookmark:t?t.bookmark(o):n}},r=function(t){null!==t.contents&&e.html(t.contents),null!==t.bookmark&&c.createFromBookmark(o,t.bookmark).select()};this.undo=function(){n>0&&(n--,r(t[n]))},this.redo=function(){t.length-1>n&&(n++,r(t[n]))},this.recordUndo=function(){n++,t.length>n&&(t=t.slice(0,n)),t.push(i())},this.recordUndo()},m=function(){var t=function(t,n){if(i.jqueryVersion<1.9){var o={};return e.each(n,function(e,n){o[n]=t.css(n)}),o}return t.css.call(t,n)};this.stylePara=function(t,n){e.each(t.nodes(d.isPara,{includeAncestor:!0}),function(t,o){e(o).css(n)})},this.styleNodes=function(t,n){t=t.splitText();var o=n&&n.nodeName||"SPAN",i=!(!n||!n.expandClosestSibling),l=!(!n||!n.onlyPartialContains);if(t.isCollapsed())return t.insertNode(d.create(o));var s=d.makePredByNodeName(o),c=e.map(t.nodes(d.isText,{fullyContains:!0}),function(e){return d.singleChildAncestor(e,s)||d.wrap(e,o)});if(i){if(l){var u=t.nodes();s=r.and(s,function(e){return a.contains(u,e)})}return e.map(c,function(t){var n=d.withClosestSiblings(t,s),o=a.head(n),i=a.tail(n);return e.each(i,function(e,t){d.appendChildNodes(o,t.childNodes),d.remove(t)}),a.head(n)})}return c},this.current=function(n,o){var i=e(d.isText(n.sc)?n.sc.parentNode:n.sc),r=["font-family","font-size","text-align","list-style-type","line-height"],a=t(i,r)||{};if(a["font-size"]=parseInt(a["font-size"],10),a["font-bold"]=document.queryCommandState("bold")?"bold":"normal",a["font-italic"]=document.queryCommandState("italic")?"italic":"normal",a["font-underline"]=document.queryCommandState("underline")?"underline":"normal",a["font-strikethrough"]=document.queryCommandState("strikeThrough")?"strikethrough":"normal",a["font-superscript"]=document.queryCommandState("superscript")?"superscript":"normal",a["font-subscript"]=document.queryCommandState("subscript")?"subscript":"normal",n.isOnList()){var l=["circle","disc","disc-leading-zero","square"],s=e.inArray(a["list-style-type"],l)>-1;a["list-style"]=s?"unordered":"ordered"}else a["list-style"]="none";var c=d.ancestor(n.sc,d.isPara);if(c&&c.style["line-height"])a["line-height"]=c.style.lineHeight;else{var u=parseInt(a["line-height"],10)/parseInt(a["font-size"],10);a["line-height"]=u.toFixed(1)}return a.image=d.isImg(o)&&o,a.anchor=n.isOnAnchor()&&d.ancestor(n.sc,d.isAnchor),a.ancestors=d.listAncestor(n.sc,d.isEditable),a.range=n,a}},g=function(){this.insertTab=function(e,t,n){var o=d.createText(new Array(n+1).join(d.NBSP_CHAR));t=t.deleteContents(),t.insertNode(o,!0),t=c.create(o,n),t.select()},this.insertParagraph=function(){var t=c.create();t=t.deleteContents(),t=t.wrapBodyInlineWithPara();var n,o=d.ancestor(t.sc,d.isPara);if(o){n=d.splitTree(o,t.getStartPoint());var i=d.listDescendant(o,d.isEmptyAnchor);i=i.concat(d.listDescendant(n,d.isEmptyAnchor)),e.each(i,function(e,t){d.remove(t)})}else{var r=t.sc.childNodes[t.so];n=e(d.emptyPara)[0],r?t.sc.insertBefore(n,r):t.sc.appendChild(n)}c.create(n,0).normalize().select()}},v=function(){this.tab=function(e,t){var n=d.ancestor(e.commonAncestor(),d.isCell),o=d.ancestor(n,d.isTable),i=d.listDescendant(o,d.isCell),r=a[t?"prev":"next"](i,n);r&&c.create(r,0).select()},this.createTable=function(t,n){for(var o,i=[],r=0;t>r;r++)i.push("<td>"+d.blank+"</td>");o=i.join("");for(var a,l=[],s=0;n>s;s++)l.push("<tr>"+o+"</tr>");return a=l.join(""),e('<table class="table table-bordered">'+a+"</table>")[0]}},b=function(){this.insertOrderedList=function(){this.toggleList("OL")},this.insertUnorderedList=function(){this.toggleList("UL")},this.indent=function(){var t=this,n=c.create().wrapBodyInlineWithPara(),o=n.nodes(d.isPara,{includeAncestor:!0}),i=a.clusterBy(o,r.peq2("parentNode"));e.each(i,function(n,o){var i=a.head(o);d.isLi(i)?t.wrapList(o,i.parentNode.nodeName):e.each(o,function(t,n){e(n).css("marginLeft",function(e,t){return(parseInt(t,10)||0)+25})})}),n.select()},this.outdent=function(){var t=this,n=c.create().wrapBodyInlineWithPara(),o=n.nodes(d.isPara,{includeAncestor:!0}),i=a.clusterBy(o,r.peq2("parentNode"));e.each(i,function(n,o){var i=a.head(o);d.isLi(i)?t.releaseList([o]):e.each(o,function(t,n){e(n).css("marginLeft",function(e,t){return t=parseInt(t,10)||0,t>25?t-25:""})})}),n.select()},this.toggleList=function(t){var n=this,o=c.create().wrapBodyInlineWithPara(),i=o.nodes(d.isPara,{includeAncestor:!0}),l=o.paraBookmark(i),s=a.clusterBy(i,r.peq2("parentNode"));if(a.find(i,d.isPurePara)){var u=[];e.each(s,function(e,o){u=u.concat(n.wrapList(o,t))}),i=u}else{var f=o.nodes(d.isList,{includeAncestor:!0}).filter(function(n){return!e.nodeName(n,t)});f.length?e.each(f,function(e,n){d.replace(n,t)}):i=this.releaseList(s,!0)}c.createFromParaBookmark(l,i).select()},this.wrapList=function(t,n){var o=a.head(t),i=a.last(t),r=d.isList(o.previousSibling)&&o.previousSibling,l=d.isList(i.nextSibling)&&i.nextSibling,s=r||d.insertAfter(d.create(n||"UL"),i);return t=e.map(t,function(e){return d.isPurePara(e)?d.replace(e,"LI"):e}),d.appendChildNodes(s,t),l&&(d.appendChildNodes(s,a.from(l.childNodes)),d.remove(l)),t},this.releaseList=function(t,n){var o=[];return e.each(t,function(t,i){var r=a.head(i),l=a.last(i),s=n?d.lastAncestor(r,d.isList):r.parentNode,c=s.childNodes.length>1?d.splitTree(s,{node:l.parentNode,offset:d.position(l)+1},!0):null,u=d.splitTree(s,{node:r.parentNode,offset:d.position(r)},!0);i=n?d.listDescendant(u,d.isLi):a.from(u.childNodes).filter(d.isLi),(n||!d.isList(s.parentNode))&&(i=e.map(i,function(e){return d.replace(e,"P")})),e.each(a.from(i).reverse(),function(e,t){d.insertAfter(t,s)});var f=a.compact([s,u,c]);e.each(f,function(t,n){var o=[n].concat(d.listDescendant(n,d.isList));e.each(o.reverse(),function(e,t){d.nodeLength(t)||d.remove(t,!0)})}),o=o.concat(i)}),o}},y=function(){var t=new m,n=new v,o=new g,r=new b;this.createRange=function(e){return e.focus(),c.create()},this.saveRange=function(e,t){e.focus(),e.data("range",c.create()),t&&c.create().collapse().select()},this.saveNode=function(e){for(var t=[],n=0,o=e[0].childNodes.length;o>n;n++)t.push(e[0].childNodes[n]);e.data("childNodes",t)},this.restoreRange=function(e){var t=e.data("range");t&&(t.select(),e.focus())},this.restoreNode=function(e){e.html("");for(var t=e.data("childNodes"),n=0,o=t.length;o>n;n++)e[0].appendChild(t[n])},this.currentStyle=function(e){var n=c.create();return n?n.isOnEditable()&&t.current(n,e):!1};var l=this.triggerOnBeforeChange=function(e){var t=e.data("callbacks").onBeforeChange;t&&t(e.html(),e)},s=this.triggerOnChange=function(e){var t=e.data("callbacks").onChange;t&&t(e.html(),e)};this.undo=function(e){l(e),e.data("NoteHistory").undo(),s(e)},this.redo=function(e){l(e),e.data("NoteHistory").redo(),s(e)};for(var u=this.beforeCommand=function(e){l(e)},p=this.afterCommand=function(e){e.data("NoteHistory").recordUndo(),s(e)},h=["bold","italic","underline","strikethrough","superscript","subscript","justifyLeft","justifyCenter","justifyRight","justifyFull","formatBlock","removeFormat","backColor","foreColor","insertHorizontalRule","fontName"],y=0,C=h.length;C>y;y++)this[h[y]]=function(e){return function(t,n){u(t),document.execCommand(e,!1,n),p(t)}}(h[y]);this.tab=function(e,t){var i=c.create();i.isCollapsed()&&i.isOnCell()?n.tab(i):(u(e),o.insertTab(e,i,t.tabsize),p(e))},this.untab=function(){var e=c.create();e.isCollapsed()&&e.isOnCell()&&n.tab(e,!0)},this.insertParagraph=function(e){u(e),o.insertParagraph(e),p(e)},this.insertOrderedList=function(e){u(e),r.insertOrderedList(e),p(e)},this.insertUnorderedList=function(e){u(e),r.insertUnorderedList(e),p(e)},this.indent=function(e){u(e),r.indent(e),p(e)},this.outdent=function(e){u(e),r.outdent(e),p(e)},this.insertImage=function(e,t,n){f.createImage(t,n).then(function(t){u(e),t.css({display:"",width:Math.min(e.width(),t.width())}),c.create().insertNode(t[0]),c.createFromNode(t[0]).collapse().select(),p(e)}).fail(function(){var t=e.data("callbacks");t.onImageUploadError&&t.onImageUploadError()})},this.insertNode=function(e,t){u(e);var n=this.createRange(e);n.insertNode(t),c.createFromNode(t).collapse().select(),p(e)},this.insertText=function(e,t){u(e);var n=this.createRange(e),o=n.insertNode(d.createText(t));c.create(o,d.nodeLength(o)).select(),p(e)},this.formatBlock=function(e,t){u(e),t=i.isMSIE?"<"+t+">":t,document.execCommand("FormatBlock",!1,t),p(e)},this.formatPara=function(e){u(e),this.formatBlock(e,"P"),p(e)};for(var y=1;6>=y;y++)this["formatH"+y]=function(e){return function(t){this.formatBlock(t,"H"+e)}}(y);this.fontSize=function(n,o){u(n);var i=this.createRange(n),r=t.styleNodes(i);e.each(r,function(t,n){e(n).css({"font-size":o+"px"})}),p(n)},this.lineHeight=function(e,n){u(e),t.stylePara(c.create(),{lineHeight:n}),p(e)},this.unlink=function(e){var t=c.create();if(t.isOnAnchor()){var n=d.ancestor(t.sc,d.isAnchor);t=c.createFromNode(n),t.select(),u(e),document.execCommand("unlink"),p(e)}},this.createLink=function(n,o,i){var r=o.url,l=o.text,s=o.newWindow,d=o.range,f=d.toString()!==l;u(n),i.onCreateLink&&(r=i.onCreateLink(r));var h;if(f){var m=d.insertNode(e("<A>"+l+"</A>")[0]);h=[m]}else h=t.styleNodes(d,{nodeName:"A",expandClosestSibling:!0,onlyPartialContains:!0});e.each(h,function(t,n){e(n).attr("href",r),s?e(n).attr("target","_blank"):e(n).removeAttr("target")});var g=c.createFromNode(a.head(h)).collapse(!0),v=g.getStartPoint(),b=c.createFromNode(a.last(h)).collapse(),y=b.getEndPoint();c.create(v.node,v.offset,y.node,y.offset).select(),p(n)},this.getLinkInfo=function(t){t.focus();var n=c.create().expand(d.isAnchor),o=e(a.head(n.nodes(d.isAnchor)));return{range:n,text:n.toString(),isNewWindow:o.length?"_blank"===o.attr("target"):!1,url:o.length?o.attr("href"):""}},this.color=function(e,t){var n=JSON.parse(t),o=n.foreColor,i=n.backColor;u(e),o&&document.execCommand("foreColor",!1,o),i&&document.execCommand("backColor",!1,i),p(e)},this.insertTable=function(e,t){var o=t.split("x");u(e);var i=c.create();i=i.deleteContents(),i.insertNode(n.createTable(o[0],o[1])),p(e)},this.floatMe=function(e,t,n){u(e),n.css("float",t),p(e)},this.imageShape=function(e,t,n){u(e),n.removeClass("img-rounded img-circle img-thumbnail"),t&&n.addClass(t),p(e)},this.resize=function(e,t,n){u(e),n.css({width:100*t+"%",height:""}),p(e)},this.resizeTo=function(e,t,n){var o;if(n){var i=e.y/e.x,r=t.data("ratio");o={width:r>i?e.x:e.y/r,height:r>i?e.x*r:e.y}}else o={width:e.x,height:e.y};t.css(o)},this.removeMedia=function(e,t,n){u(e),n.detach();var o=e.data("callbacks");o&&o.onMediaDelete&&o.onMediaDelete(n,this,e),p(e)},this.focus=function(e){e.focus()}},C=function(){this.update=function(t,n){var o=function(t,n){t.find(".dropdown-menu li a").each(function(){var t=e(this).data("value")+""==n+"";this.className=t?"checked":""})},r=function(e,n){var o=t.find(e);o.toggleClass("active",n())};if(n.image){var a=e(n.image);r('button[data-event="imageShape"][data-value="img-rounded"]',function(){return a.hasClass("img-rounded")}),r('button[data-event="imageShape"][data-value="img-circle"]',function(){return a.hasClass("img-circle")}),r('button[data-event="imageShape"][data-value="img-thumbnail"]',function(){return a.hasClass("img-thumbnail")}),r('button[data-event="imageShape"]:not([data-value])',function(){return!a.is(".img-rounded, .img-circle, .img-thumbnail")});var l=a.css("float");r('button[data-event="floatMe"][data-value="left"]',function(){return"left"===l}),r('button[data-event="floatMe"][data-value="right"]',function(){return"right"===l}),r('button[data-event="floatMe"][data-value="none"]',function(){return"left"!==l&&"right"!==l});var s=a.attr("style");return r('button[data-event="resize"][data-value="1"]',function(){return!!/(^|\s)(max-)?width\s*:\s*100%/.test(s)}),r('button[data-event="resize"][data-value="0.5"]',function(){return!!/(^|\s)(max-)?width\s*:\s*50%/.test(s)}),void r('button[data-event="resize"][data-value="0.25"]',function(){return!!/(^|\s)(max-)?width\s*:\s*25%/.test(s)})}var d=t.find(".note-fontname");if(d.length){var c=n["font-family"];if(c){for(var u=c.split(","),f=0,p=u.length;p>f&&(c=u[f].replace(/[\'\"]/g,"").replace(/\s+$/,"").replace(/^\s+/,""),
!i.isFontInstalled(c));f++);d.find(".note-current-fontname").text(c),o(d,c)}}var h=t.find(".note-fontsize");h.find(".note-current-fontsize").text(n["font-size"]),o(h,parseFloat(n["font-size"]));var m=t.find(".note-height");o(m,parseFloat(n["line-height"])),r('button[data-event="bold"]',function(){return"bold"===n["font-bold"]}),r('button[data-event="italic"]',function(){return"italic"===n["font-italic"]}),r('button[data-event="underline"]',function(){return"underline"===n["font-underline"]}),r('button[data-event="strikethrough"]',function(){return"strikethrough"===n["font-strikethrough"]}),r('button[data-event="superscript"]',function(){return"superscript"===n["font-superscript"]}),r('button[data-event="subscript"]',function(){return"subscript"===n["font-subscript"]}),r('button[data-event="justifyLeft"]',function(){return"left"===n["text-align"]||"start"===n["text-align"]}),r('button[data-event="justifyCenter"]',function(){return"center"===n["text-align"]}),r('button[data-event="justifyRight"]',function(){return"right"===n["text-align"]}),r('button[data-event="justifyFull"]',function(){return"justify"===n["text-align"]}),r('button[data-event="insertUnorderedList"]',function(){return"unordered"===n["list-style"]}),r('button[data-event="insertOrderedList"]',function(){return"ordered"===n["list-style"]})},this.updateRecentColor=function(t,n,o){var i=e(t).closest(".note-color"),r=i.find(".note-recent-color"),a=JSON.parse(r.attr("data-value"));a[n]=o,r.attr("data-value",JSON.stringify(a));var l="backColor"===n?"background-color":"color";r.find("i").css(l,o)}},x=function(){var e=new C;this.update=function(t,n){e.update(t,n)},this.updateRecentColor=function(t,n,o){e.updateRecentColor(t,n,o)},this.activate=function(e){e.find("button").not('button[data-event="codeview"]').removeClass("disabled")},this.deactivate=function(e){e.find("button").not('button[data-event="codeview"]').addClass("disabled")},this.updateFullscreen=function(e,t){var n=e.find('button[data-event="fullscreen"]');n.toggleClass("active",t)},this.updateCodeview=function(e,t){var n=e.find('button[data-event="codeview"]');n.toggleClass("active",t),t?this.deactivate(e):this.activate(e)},this.get=function(e,t){var n=d.makeLayoutInfo(e).toolbar();return n.find("[data-name="+t+"]")},this.setButtonState=function(e,t,n){n=n!==!1;var o=this.get(e,t);o.toggleClass("active",n)}},k=24,w=function(){var t=e(document);this.attach=function(e,t){t.disableResizeEditor||e.statusbar().on("mousedown",n)};var n=function(e){e.preventDefault(),e.stopPropagation();var n=d.makeLayoutInfo(e.target).editable(),o=n.offset().top-t.scrollTop(),i=d.makeLayoutInfo(e.currentTarget||e.target),r=i.editor().data("options");t.on("mousemove",function(e){var t=e.clientY-(o+k);t=r.minHeight>0?Math.max(t,r.minHeight):t,t=r.maxHeight>0?Math.min(t,r.maxHeight):t,n.height(t)}).one("mouseup",function(){t.off("mousemove")})}},N=function(){var t=new C,n=function(t,n){var o=e(t),i=n?o.offset():o.position(),r=o.outerHeight(!0);return{left:i.left,top:i.top+r}},o=function(e,t){e.css({display:"block",left:t.left,top:t.top})},i=20;this.update=function(l,s,d){t.update(l,s);var c=l.find(".note-link-popover");if(s.anchor){var u=c.find("a"),f=e(s.anchor).attr("href"),p=e(s.anchor).attr("target");u.attr("href",f).html(f),p?u.attr("target","_blank"):u.removeAttr("target"),o(c,n(s.anchor,d))}else c.hide();var h=l.find(".note-image-popover");s.image?o(h,n(s.image,d)):h.hide();var m=l.find(".note-air-popover");if(d&&!s.range.isCollapsed()){var g=a.last(s.range.getClientRects());if(g){var v=r.rect2bnd(g);o(m,{left:Math.max(v.left+v.width/2-i,0),top:v.top+v.height})}}else m.hide()},this.updateRecentColor=function(e,t,n){e.updateRecentColor(e,t,n)},this.hide=function(e){e.children().hide()}},E=function(t){var n=e(document),o=function(o){if(d.isControlSizing(o.target)){o.preventDefault(),o.stopPropagation();var i=d.makeLayoutInfo(o.target),r=i.handle(),a=i.popover(),l=i.editable(),s=i.editor(),c=r.find(".note-control-selection").data("target"),u=e(c),f=u.offset(),p=n.scrollTop(),h=s.data("options").airMode;n.on("mousemove",function(e){t.invoke("editor.resizeTo",{x:e.clientX-f.left,y:e.clientY-(f.top-p)},u,!e.shiftKey),t.invoke("handle.update",r,{image:c},h),t.invoke("popover.update",a,{image:c},h)}).one("mouseup",function(){n.off("mousemove"),t.invoke("editor.afterCommand",l)}),u.data("ratio")||u.data("ratio",u.height()/u.width())}};this.attach=function(e){e.handle().on("mousedown",o)},this.update=function(t,n,o){var i=t.find(".note-control-selection");if(n.image){var r=e(n.image),a=o?r.offset():r.position(),l={w:r.outerWidth(!0),h:r.outerHeight(!0)};i.css({display:"block",left:a.left,top:a.top,width:l.w,height:l.h}).data("target",n.image);var s=l.w+"x"+l.h;i.find(".note-control-selection-info").text(s)}else i.hide()},this.hide=function(e){e.children().hide()}},S=function(t){var n=e(window),o=e("html, body");this.toggle=function(e){var i=e.editor(),r=e.toolbar(),a=e.editable(),l=e.codable(),s=function(e){a.css("height",e.h),l.css("height",e.h),l.data("cmeditor")&&l.data("cmeditor").setsize(null,e.h)};i.toggleClass("fullscreen");var d=i.hasClass("fullscreen");d?(a.data("orgheight",a.css("height")),n.on("resize",function(){s({h:n.height()-r.outerHeight()})}).trigger("resize"),o.css("overflow","hidden")):(n.off("resize"),s({h:a.data("orgheight")}),o.css("overflow","visible")),t.invoke("toolbar.updateFullscreen",r,d)}};i.hasCodeMirror&&(i.isSupportAmd?require(["CodeMirror"],function(e){t=e}):t=window.CodeMirror);var T=function(e){this.sync=function(t){var n=e.invoke("codeview.isActivated",t);n&&i.hasCodeMirror&&t.codable().data("cmEditor").save()},this.isActivated=function(e){var t=e.editor();return t.hasClass("codeview")},this.toggle=function(e){this.isActivated(e)?this.deactivate(e):this.activate(e)},this.activate=function(n){var o=n.editor(),r=n.toolbar(),a=n.editable(),l=n.codable(),s=n.popover(),c=n.handle(),u=o.data("options");if(l.val(d.html(a,u.prettifyHtml)),l.height(a.height()),e.invoke("toolbar.updateCodeview",r,!0),e.invoke("popover.hide",s),e.invoke("handle.hide",c),o.addClass("codeview"),l.focus(),i.hasCodeMirror){var f=t.fromTextArea(l[0],u.codemirror);if(u.codemirror.tern){var p=new t.TernServer(u.codemirror.tern);f.ternServer=p,f.on("cursorActivity",function(e){p.updateArgHints(e)})}f.setSize(null,a.outerHeight()),l.data("cmEditor",f)}},this.deactivate=function(t){var n=t.editor(),o=t.toolbar(),r=t.editable(),a=t.codable(),l=n.data("options");if(i.hasCodeMirror){var s=a.data("cmEditor");a.val(s.getValue()),s.toTextArea()}r.html(d.value(a,l.prettifyHtml)||d.emptyPara),r.height(l.height?a.height():"auto"),n.removeClass("codeview"),r.focus(),e.invoke("toolbar.updateCodeview",o,!1)}},$=function(t){var n=e(document);this.attach=function(e,t){t.airMode||t.disableDragAndDrop?n.on("drop",function(e){e.preventDefault()}):this.attachDragAndDropEvent(e,t)},this.attachDragAndDropEvent=function(o,i){var r=e(),a=o.editor(),l=o.dropzone(),s=l.find(".note-dropzone-message");n.on("dragenter",function(e){var n=t.invoke("codeview.isActivated",o),d=a.width()>0&&a.height()>0;n||r.length||!d||(a.addClass("dragover"),l.width(a.width()),l.height(a.height()),s.text(i.langInfo.image.dragImageHere)),r=r.add(e.target)}).on("dragleave",function(e){r=r.not(e.target),r.length||a.removeClass("dragover")}).on("drop",function(){r=e(),a.removeClass("dragover")}),l.on("dragenter",function(){l.addClass("hover"),s.text(i.langInfo.image.dropImage)}).on("dragleave",function(){l.removeClass("hover"),s.text(i.langInfo.image.dragImageHere)}),l.on("drop",function(n){n.preventDefault();var o=n.originalEvent.dataTransfer,i=o.getData("text/html"),r=o.getData("text/plain"),a=d.makeLayoutInfo(n.currentTarget||n.target);o&&o.files&&o.files.length?(a.editable().focus(),t.insertImages(a,o.files)):i?e(i).each(function(){a.editable().focus(),t.invoke("editor.insertNode",a.editable(),this)}):r&&(a.editable().focus(),t.invoke("editor.insertText",a.editable(),r))}).on("dragover",!1)}},D=function(t){this.attach=function(e){e.editable().on("paste",n)};var n=function(n){var o=n.originalEvent.clipboardData,i=d.makeLayoutInfo(n.currentTarget||n.target),r=i.editable();if(!o||!o.items||!o.items.length){var l=r.data("callbacks");if(!l.onImageUpload)return;return t.invoke("editor.saveNode",r),t.invoke("editor.saveRange",r),r.html(""),void setTimeout(function(){var n=r.find("img");if(n.length&&-1!==n[0].src.indexOf("data:")){for(var o=n[0].src,a=atob(o.split(",")[1]),l=new Uint8Array(a.length),s=0;s<a.length;s++)l[s]=a.charCodeAt(s);var d=new Blob([l],{type:"image/png"});d.name="clipboard.png",t.invoke("editor.restoreNode",r),t.invoke("editor.restoreRange",r),t.insertImages(i,[d]),t.invoke("editor.afterCommand",r)}else{var c=r.html();t.invoke("editor.restoreNode",r),t.invoke("editor.restoreRange",r);try{e(c).each(function(){r.focus(),t.invoke("editor.insertNode",r,this)})}catch(u){r.focus(),t.invoke("editor.insertText",r,c)}}},0)}var s=a.head(o.items),c="file"===s.kind&&-1!==s.type.indexOf("image/");c&&t.insertImages(i,[s.getAsFile()]),t.invoke("editor.afterCommand",r)}},M=function(t){var n=function(e,t){e.toggleClass("disabled",!t),e.attr("disabled",!t)};this.showLinkDialog=function(t,o,i){return e.Deferred(function(e){var t=o.find(".note-link-dialog"),r=t.find(".note-link-text"),a=t.find(".note-link-url"),l=t.find(".note-link-btn"),s=t.find("input[type=checkbox]");t.one("shown.bs.modal",function(){r.val(i.text),r.on("input",function(){i.text=r.val()}),i.url||(i.url=i.text,n(l,i.text)),a.on("input",function(){n(l,a.val()),i.text||r.val(a.val())}).val(i.url).trigger("focus").trigger("select"),s.prop("checked",i.newWindow),l.one("click",function(n){n.preventDefault(),e.resolve({range:i.range,url:a.val(),text:r.val(),newWindow:s.is(":checked")}),t.modal("hide")})}).one("hidden.bs.modal",function(){r.off("input"),a.off("input"),l.off("click"),"pending"===e.state()&&e.reject()}).modal("show")}).promise()},this.show=function(e){var n=e.editor(),o=e.dialog(),i=e.editable(),r=e.popover(),a=t.invoke("editor.getLinkInfo",i),l=n.data("options");t.invoke("editor.saveRange",i),this.showLinkDialog(i,o,a).then(function(e){t.invoke("editor.restoreRange",i),t.invoke("editor.createLink",i,e,l),t.invoke("popover.hide",r)}).fail(function(){t.invoke("editor.restoreRange",i)})}},A=function(t){var n=function(e,t){e.toggleClass("disabled",!t),e.attr("disabled",!t)};this.show=function(e){var n=e.dialog(),o=e.editable();t.invoke("editor.saveRange",o),this.showImageDialog(o,n).then(function(n){t.invoke("editor.restoreRange",o),"string"==typeof n?t.invoke("editor.insertImage",o,n):t.insertImages(e,n)}).fail(function(){t.invoke("editor.restoreRange",o)})},this.showImageDialog=function(t,o){return e.Deferred(function(e){var t=o.find(".note-image-dialog"),i=o.find(".note-image-input"),r=o.find(".note-image-url"),a=o.find(".note-image-btn");t.one("shown.bs.modal",function(){i.replaceWith(i.clone().on("change",function(){e.resolve(this.files||this.value),t.modal("hide")}).val("")),a.click(function(n){n.preventDefault(),e.resolve(r.val()),t.modal("hide")}),r.on("keyup paste",function(e){var t;t="paste"===e.type?e.originalEvent.clipboardData.getData("text"):r.val(),n(a,t)}).val("").trigger("focus")}).one("hidden.bs.modal",function(){i.off("change"),r.off("keyup paste"),a.off("click"),"pending"===e.state()&&e.reject()}).modal("show")})}},I=function(t){this.showHelpDialog=function(t,n){return e.Deferred(function(e){var t=n.find(".note-help-dialog");t.one("hidden.bs.modal",function(){e.resolve()}).modal("show")}).promise()},this.show=function(e){var n=e.dialog(),o=e.editable();t.invoke("editor.saveRange",o,!0),this.showHelpDialog(o,n).then(function(){t.invoke("editor.restoreRange",o)})}},F=function(){var t=this.modules={editor:new y(this),toolbar:new x(this),statusbar:new w(this),popover:new N(this),handle:new E(this),fullscreen:new S(this),codeview:new T(this),dragAndDrop:new $(this),clipboard:new D(this),linkDialog:new M(this),imageDialog:new A(this),helpDialog:new I(this)};this.invoke=function(){var e=a.head(a.from(arguments)),t=a.tail(a.from(arguments)),n=e.split("."),o=n.length>1,i=o&&a.head(n),r=o?a.last(n):a.head(n),l=this.getModule(i),s=l[r];return s&&s.apply(l,t)},this.getModule=function(e){return this.modules[e]||this.modules.editor},this.insertImages=function(n,o){var i=n.editor(),r=n.editable(),a=n.holder(),l=r.data("callbacks"),s=i.data("options");l.onImageUpload?(l.onImageUpload(o,t.editor,r),g(a,"image.upload")([o])):e.each(o,function(e,n){var o=n.name;s.maximumImageFileSize&&s.maximumImageFileSize<n.size?l.onImageUploadError?(l.onImageUploadError(s.langInfo.image.maximumFileSizeError),g(a,"image.upload.error")(s.langInfo.image.maximumFileSizeError)):alert(s.langInfo.image.maximumFileSizeError):f.readFileAsDataURL(n).then(function(e){t.editor.insertImage(r,e,o)}).fail(function(){l.onImageUploadError&&(l.onImageUploadError(),g(a,"image.upload.error")(s.langInfo.image.maximumFileSizeError))})})};var n={showLinkDialog:function(e){t.linkDialog.show(e)},showImageDialog:function(e){t.imageDialog.show(e)},showHelpDialog:function(e){t.helpDialog.show(e)},fullscreen:function(e){t.fullscreen.toggle(e)},codeview:function(e){t.codeview.toggle(e)}},o=function(e){d.isImg(e.target)&&e.preventDefault()},r=function(e){setTimeout(function(){var n=d.makeLayoutInfo(e.currentTarget||e.target),o=t.editor.currentStyle(e.target);if(o){var i=n.editor().data("options").airMode;i||t.toolbar.update(n.toolbar(),o),t.popover.update(n.popover(),o,i),t.handle.update(n.handle(),o,i)}},0)},l=function(e){var n=d.makeLayoutInfo(e.currentTarget||e.target);t.popover.hide(n.popover()),t.handle.hide(n.handle())},s=function(t){var n=e(t.target).closest("[data-event]");n.length&&t.preventDefault()},c=function(o){var i=e(o.target).closest("[data-event]");if(i.length){var l,s=i.attr("data-event"),c=i.attr("data-value"),u=i.attr("data-hide"),f=d.makeLayoutInfo(o.target);if(-1!==e.inArray(s,["resize","floatMe","removeMedia","imageShape"])){var p=f.handle().find(".note-control-selection");l=e(p.data("target"))}if(u&&i.parents(".popover").hide(),e.isFunction(e.summernote.pluginEvents[s]))e.summernote.pluginEvents[s](o,t.editor,f,c);else if(t.editor[s]){var h=f.editable();h.focus(),t.editor[s](h,c,l),o.preventDefault()}else n[s]&&(n[s].call(this,f),o.preventDefault());if(-1!==e.inArray(s,["backColor","foreColor"])){var m=f.editor().data("options",m),g=m.airMode?t.popover:t.toolbar;g.updateRecentColor(a.head(i),s,c)}r(o)}},u=18,m=function(t,n){var o,i=e(t.target.parentNode),r=i.next(),a=i.find(".note-dimension-picker-mousecatcher"),l=i.find(".note-dimension-picker-highlighted"),s=i.find(".note-dimension-picker-unhighlighted");if(void 0===t.offsetX){var d=e(t.target).offset();o={x:t.pageX-d.left,y:t.pageY-d.top}}else o={x:t.offsetX,y:t.offsetY};var c={c:Math.ceil(o.x/u)||1,r:Math.ceil(o.y/u)||1};l.css({width:c.c+"em",height:c.r+"em"}),a.attr("data-value",c.c+"x"+c.r),3<c.c&&c.c<n.insertTableMaxSize.col&&s.css({width:c.c+1+"em"}),3<c.r&&c.r<n.insertTableMaxSize.row&&s.css({height:c.r+1+"em"}),r.html(c.c+" x "+c.r)},g=function(e,t){return function(){return e.trigger("summernote."+t,arguments)}};this.bindKeyMap=function(o,i){var r=o.editor(),a=o.editable();a.on("keydown",function(l){var s=[];l.metaKey&&s.push("CMD"),l.ctrlKey&&!l.altKey&&s.push("CTRL"),l.shiftKey&&s.push("SHIFT");var d=p.nameFromCode[l.keyCode];d&&s.push(d);var c=i[s.join("+")];if(c)if(e.summernote.pluginEvents[c]){var u=e.summernote.pluginEvents[c];e.isFunction(u)&&u(l,t.editor,o)}else t.editor[c]?(t.editor[c](a,r.data("options")),l.preventDefault()):n[c]&&(n[c].call(this,o),l.preventDefault());else p.isEdit(l.keyCode)&&t.editor.afterCommand(a)})},this.attach=function(e,n){n.shortcuts&&this.bindKeyMap(e,n.keyMap[i.isMac?"mac":"pc"]),e.editable().on("mousedown",o),e.editable().on("keyup mouseup",r),e.editable().on("scroll",l),t.clipboard.attach(e,n),t.handle.attach(e,n),e.popover().on("click",c),e.popover().on("mousedown",s),t.dragAndDrop.attach(e,n),n.airMode||(e.toolbar().on("click",c),e.toolbar().on("mousedown",s),t.statusbar.attach(e,n));var u=n.airMode?e.popover():e.toolbar(),f=u.find(".note-dimension-picker-mousecatcher");f.css({width:n.insertTableMaxSize.col+"em",height:n.insertTableMaxSize.row+"em"}).on("mousemove",function(e){m(e,n)}),e.editor().data("options",n),i.isMSIE||setTimeout(function(){document.execCommand("styleWithCSS",0,n.styleWithSpan)},0);var g=new h(e.editable());if(e.editable().data("NoteHistory",g),n.onenter&&e.editable().keypress(function(e){e.keyCode===p.ENTER&&n.onenter(e)}),n.onfocus&&e.editable().focus(n.onfocus),n.onblur&&e.editable().blur(n.onblur),n.onkeyup&&e.editable().keyup(n.onkeyup),n.onkeydown&&e.editable().keydown(n.onkeydown),n.onpaste&&e.editable().on("paste",n.onpaste),n.onToolbarClick&&e.toolbar().click(n.onToolbarClick),n.onChange){var v=function(){t.editor.triggerOnChange(e.editable())};if(i.isMSIE){var b="DOMCharacterDataModified DOMSubtreeModified DOMNodeInserted";e.editable().on(b,v)}else e.editable().on("input",v)}e.editable().data("callbacks",{onBeforeChange:n.onBeforeChange,onChange:n.onChange,onAutoSave:n.onAutoSave,onImageUpload:n.onImageUpload,onImageUploadError:n.onImageUploadError,onFileUpload:n.onFileUpload,onFileUploadError:n.onFileUpload,onMediaDelete:n.onMediaDelete}),d.isTextarea(a.head(e.holder()))&&e.holder().closest("form").submit(function(){var t=e.holder().code();e.holder().val(t),n.onsubmit&&n.onsubmit(t)})},this.attachCustomEvent=function(t,n){var o=t.holder(),r=t.editable();if(r.on("mousedown",g(o,"mousedown")),r.on("keyup mouseup",g(o,"update")),r.on("scroll",g(o,"scroll")),r.keypress(function(e){e.keyCode===p.ENTER&&g(o,"enter").call(this,e)}),r.focus(g(o,"focus")),r.blur(g(o,"blur")),r.keyup(g(o,"keyup")),r.keydown(g(o,"keydown")),r.on("paste",g(o,"paste")),n.airMode||(t.toolbar().click(g(o,"toolbar.click")),t.popover().click(g(o,"popover.click"))),i.isMSIE){var l="DOMCharacterDataModified DOMSubtreeModified DOMNodeInserted";r.on(l,g(o,"change"))}else r.on("input",g(o,"change"));d.isTextarea(a.head(o))&&o.closest("form").submit(function(e){var t=o.code();g(o,"submit").call(this,e,t)}),g(o,"init")();for(var s=0,c=e.summernote.plugins.length;c>s;s++)e.isFunction(e.summernote.plugins[s].init)&&e.summernote.plugins[s].init(t)},this.detach=function(e,t){e.holder().off(),e.editable().off(),e.popover().off(),e.handle().off(),e.dialog().off(),t.airMode||(e.dropzone().off(),e.toolbar().off(),e.statusbar().off())}},L=function(){var t=function(e,t){var n=t.event,o=t.value,i=t.title,r=t.className,a=t.dropdown,l=t.hide;return'<button type="button" class="btn btn-default btn-sm btn-small'+(r?" "+r:"")+(a?" dropdown-toggle":"")+'"'+(a?' data-toggle="dropdown"':"")+(i?' title="'+i+'"':"")+(n?' data-event="'+n+'"':"")+(o?" data-value='"+o+"'":"")+(l?" data-hide='"+l+"'":"")+' tabindex="-1">'+e+(a?' <span class="caret"></span>':"")+"</button>"+(a||"")},n=function(e,n){var o='<i class="'+e+'"></i>';return t(o,n)},o=function(t,n){var o=e('<div class="'+t+' popover bottom in" style="display: none;"><div class="arrow"></div><div class="popover-content"></div></div>');return o.find(".popover-content").append(n),o},a=function(e,t,n,o){return'<div class="'+e+' modal" aria-hidden="false"><div class="modal-dialog"><div class="modal-content">'+(t?'<div class="modal-header"><button type="button" class="close" aria-hidden="true" tabindex="-1">&times;</button><h4 class="modal-title">'+t+"</h4></div>":"")+'<form class="note-modal-form"><div class="modal-body">'+n+"</div>"+(o?'<div class="modal-footer">'+o+"</div>":"")+"</form></div></div></div>"},l={picture:function(e,t){return n(t.iconPrefix+"picture-o",{event:"showImageDialog",title:e.image.image,hide:!0})},link:function(e,t){return n(t.iconPrefix+"link",{event:"showLinkDialog",title:e.link.link,hide:!0})},table:function(e,t){var o='<ul class="note-table dropdown-menu"><div class="note-dimension-picker"><div class="note-dimension-picker-mousecatcher" data-event="insertTable" data-value="1x1"></div><div class="note-dimension-picker-highlighted"></div><div class="note-dimension-picker-unhighlighted"></div></div><div class="note-dimension-display"> 1 x 1 </div></ul>';return n(t.iconPrefix+"table",{title:e.table.table,dropdown:o})},style:function(e,t){var o=t.styleTags.reduce(function(t,n){var o=e.style["p"===n?"normal":n];return t+'<li><a data-event="formatBlock" href="#" data-value="'+n+'">'+("p"===n||"pre"===n?o:"<"+n+">"+o+"</"+n+">")+"</a></li>"},"");return n(t.iconPrefix+"magic",{title:e.style.style,dropdown:'<ul class="dropdown-menu">'+o+"</ul>"})},fontname:function(e,n){var o=[],r=n.fontNames.reduce(function(e,t){return i.isFontInstalled(t)||-1!==n.fontNamesIgnoreCheck.indexOf(t)?(o.push(t),e+'<li><a data-event="fontName" href="#" data-value="'+t+'" style="font-family:\''+t+'\'"><i class="'+n.iconPrefix+'check"></i> '+t+"</a></li>"):e},""),a=i.isFontInstalled(n.defaultFontName),l=a?n.defaultFontName:o[0],s='<span class="note-current-fontname">'+l+"</span>";return t(s,{title:e.font.name,dropdown:'<ul class="dropdown-menu">'+r+"</ul>"})},color:function(e,n){var o='<i class="'+n.iconPrefix+'font" style="color:black;background-color:yellow;"></i>',i=t(o,{className:"note-recent-color",title:e.color.recent,event:"color",value:'{"backColor":"yellow"}'}),r='<ul class="dropdown-menu"><li><div class="btn-group"><div class="note-palette-title">'+e.color.background+'</div><div class="note-color-reset" data-event="backColor" data-value="inherit" title="'+e.color.transparent+'">'+e.color.setTransparent+'</div><div class="note-color-palette" data-target-event="backColor"></div></div><div class="btn-group"><div class="note-palette-title">'+e.color.foreground+'</div><div class="note-color-reset" data-event="foreColor" data-value="inherit" title="'+e.color.reset+'">'+e.color.resetToDefault+'</div><div class="note-color-palette" data-target-event="foreColor"></div></div></li></ul>',a=t("",{title:e.color.more,dropdown:r});return i+a},bold:function(e,t){return n(t.iconPrefix+"bold",{event:"bold",title:e.font.bold})},italic:function(e,t){return n(t.iconPrefix+"italic",{event:"italic",title:e.font.italic})},underline:function(e,t){return n(t.iconPrefix+"underline",{event:"underline",title:e.font.underline})},clear:function(e,t){return n(t.iconPrefix+"eraser",{event:"removeFormat",title:e.font.clear})},ul:function(e,t){return n(t.iconPrefix+"list-ul",{event:"insertUnorderedList",title:e.lists.unordered})},ol:function(e,t){return n(t.iconPrefix+"list-ol",{event:"insertOrderedList",title:e.lists.ordered})},paragraph:function(e,t){var o=n(t.iconPrefix+"align-left",{title:e.paragraph.left,event:"justifyLeft"}),i=n(t.iconPrefix+"align-center",{title:e.paragraph.center,event:"justifyCenter"}),r=n(t.iconPrefix+"align-right",{title:e.paragraph.right,event:"justifyRight"}),a=n(t.iconPrefix+"align-justify",{title:e.paragraph.justify,event:"justifyFull"}),l=n(t.iconPrefix+"outdent",{title:e.paragraph.outdent,event:"outdent"}),s=n(t.iconPrefix+"indent",{title:e.paragraph.indent,event:"indent"}),d='<div class="dropdown-menu"><div class="note-align btn-group">'+o+i+r+a+'</div><div class="note-list btn-group">'+s+l+"</div></div>";return n(t.iconPrefix+"align-left",{title:e.paragraph.paragraph,dropdown:d})},height:function(e,t){var o=t.lineHeights.reduce(function(e,n){return e+'<li><a data-event="lineHeight" href="#" data-value="'+parseFloat(n)+'"><i class="'+t.iconPrefix+'check"></i> '+n+"</a></li>"},"");return n(t.iconPrefix+"text-height",{title:e.font.height,dropdown:'<ul class="dropdown-menu">'+o+"</ul>"})},help:function(e,t){return n(t.iconPrefix+"question",{event:"showHelpDialog",title:e.options.help,hide:!0})},fullscreen:function(e,t){return n(t.iconPrefix+"arrows-alt",{event:"fullscreen",title:e.options.fullscreen})},codeview:function(e,t){return n(t.iconPrefix+"code",{event:"codeview",title:e.options.codeview})},undo:function(e,t){return n(t.iconPrefix+"undo",{event:"undo",title:e.history.undo})},redo:function(e,t){return n(t.iconPrefix+"repeat",{event:"redo",title:e.history.redo})},hr:function(e,t){return n(t.iconPrefix+"minus",{event:"insertHorizontalRule",title:e.hr.insert})}},s=function(i,r){var a=function(){var e=n(r.iconPrefix+"edit",{title:i.link.edit,event:"showLinkDialog",hide:!0}),t=n(r.iconPrefix+"unlink",{title:i.link.unlink,event:"unlink"}),a='<a href="http://www.google.com" target="_blank">www.google.com</a>&nbsp;&nbsp;<div class="note-insert btn-group">'+e+t+"</div>";return o("note-link-popover",a)},s=function(){var e=t('<span class="note-fontsize-10">100%</span>',{title:i.image.resizeFull,event:"resize",value:"1"}),a=t('<span class="note-fontsize-10">50%</span>',{title:i.image.resizeHalf,event:"resize",value:"0.5"}),l=t('<span class="note-fontsize-10">25%</span>',{title:i.image.resizeQuarter,event:"resize",value:"0.25"}),s=n(r.iconPrefix+"align-left",{title:i.image.floatLeft,event:"floatMe",value:"left"}),d=n(r.iconPrefix+"align-right",{title:i.image.floatRight,event:"floatMe",value:"right"}),c=n(r.iconPrefix+"align-justify",{title:i.image.floatNone,event:"floatMe",value:"none"}),u=n(r.iconPrefix+"square",{title:i.image.shapeRounded,event:"imageShape",value:"img-rounded"}),f=n(r.iconPrefix+"circle-o",{title:i.image.shapeCircle,event:"imageShape",value:"img-circle"}),p=n(r.iconPrefix+"picture-o",{title:i.image.shapeThumbnail,event:"imageShape",value:"img-thumbnail"}),h=n(r.iconPrefix+"times",{title:i.image.shapeNone,event:"imageShape",value:""}),m=n(r.iconPrefix+"trash-o",{title:i.image.remove,event:"removeMedia",value:"none"}),g='<div class="btn-group">'+e+a+l+'</div><div class="btn-group">'+s+d+c+'</div><div class="btn-group">'+u+f+p+h+'</div><div class="btn-group">'+m+"</div>";return o("note-image-popover",g)},d=function(){for(var t=e("<div />"),n=0,a=r.airPopover.length;a>n;n++){for(var s=r.airPopover[n],d=e('<div class="note-'+s[0]+' btn-group">'),c=0,u=s[1].length;u>c;c++){var f=e(l[s[1][c]](i,r));f.attr("data-name",s[1][c]),d.append(f)}t.append(d)}return o("note-air-popover",t.children())},c=e('<div class="note-popover" />');return c.append(a()),c.append(s()),r.airMode&&c.append(d()),c},c=function(){return'<div class="note-handle"><div class="note-control-selection"><div class="note-control-selection-bg"></div><div class="note-control-holder note-control-nw"></div><div class="note-control-holder note-control-ne"></div><div class="note-control-holder note-control-sw"></div><div class="note-control-sizing note-control-se"></div><div class="note-control-selection-info"></div></div></div>'},u=function(e,t){var n="note-shortcut-col col-xs-6 note-shortcut-",o=[];for(var i in t)t.hasOwnProperty(i)&&o.push('<div class="'+n+'key">'+t[i].kbd+'</div><div class="'+n+'name">'+t[i].text+"</div>");return'<div class="note-shortcut-row row"><div class="'+n+'title col-xs-offset-6">'+e+'</div></div><div class="note-shortcut-row row">'+o.join('</div><div class="note-shortcut-row row">')+"</div>"},f=function(e){var t=[{kbd:"⌘ + B",text:e.font.bold},{kbd:"⌘ + I",text:e.font.italic},{kbd:"⌘ + U",text:e.font.underline},{kbd:"⌘ + \\",text:e.font.clear}];return u(e.shortcut.textFormatting,t)},p=function(e){var t=[{kbd:"⌘ + Z",text:e.history.undo},{kbd:"⌘ + ⇧ + Z",text:e.history.redo},{kbd:"⌘ + ]",text:e.paragraph.indent},{kbd:"⌘ + [",text:e.paragraph.outdent},{kbd:"⌘ + ENTER",text:e.hr.insert}];return u(e.shortcut.action,t)},h=function(e){var t=[{kbd:"⌘ + ⇧ + L",text:e.paragraph.left},{kbd:"⌘ + ⇧ + E",text:e.paragraph.center},{kbd:"⌘ + ⇧ + R",text:e.paragraph.right},{kbd:"⌘ + ⇧ + J",text:e.paragraph.justify},{kbd:"⌘ + ⇧ + NUM7",text:e.lists.ordered},{kbd:"⌘ + ⇧ + NUM8",text:e.lists.unordered}];return u(e.shortcut.paragraphFormatting,t)},m=function(e){var t=[{kbd:"⌘ + NUM0",text:e.style.normal},{kbd:"⌘ + NUM1",text:e.style.h1},{kbd:"⌘ + NUM2",text:e.style.h2},{kbd:"⌘ + NUM3",text:e.style.h3},{kbd:"⌘ + NUM4",text:e.style.h4},{kbd:"⌘ + NUM5",text:e.style.h5},{kbd:"⌘ + NUM6",text:e.style.h6}];return u(e.shortcut.documentStyle,t)},g=function(e,t){var n=t.extraKeys,o=[];for(var i in n)n.hasOwnProperty(i)&&o.push({kbd:i,text:n[i]});return u(e.shortcut.extraKeys,o)},v=function(e,t){var n='class="note-shortcut note-shortcut-col col-sm-6 col-xs-12"',o=["<div "+n+">"+p(e,t)+"</div><div "+n+">"+f(e,t)+"</div>","<div "+n+">"+m(e,t)+"</div><div "+n+">"+h(e,t)+"</div>"];return t.extraKeys&&o.push("<div "+n+">"+g(e,t)+"</div>"),'<div class="note-shortcut-row row">'+o.join('</div><div class="note-shortcut-row row">')+"</div>"},b=function(e){return e.replace(/⌘/g,"Ctrl").replace(/⇧/g,"Shift")},y={image:function(e,t){var n="";if(t.maximumImageFileSize){var o=Math.floor(Math.log(t.maximumImageFileSize)/Math.log(1024)),i=1*(t.maximumImageFileSize/Math.pow(1024,o)).toFixed(2)+" "+" KMGTP"[o]+"B";n="<small>"+e.image.maximumFileSize+" : "+i+"</small>"}var r='<div class="form-group row-fluid note-group-select-from-files"><label>'+e.image.selectFromFiles+'</label><input class="note-image-input" type="file" name="files" accept="image/*" multiple="multiple" />'+n+'</div><div class="form-group row-fluid"><label>'+e.image.url+'</label><input class="note-image-url form-control span12" type="text" /></div>',l='<button href="#" class="btn btn-primary note-image-btn disabled" disabled>'+e.image.insert+"</button>";return a("note-image-dialog",e.image.insert,r,l)},link:function(e,t){var n='<div class="form-group row-fluid"><label>'+e.link.textToDisplay+'</label><input class="note-link-text form-control span12" type="text" /></div><div class="form-group row-fluid"><label>'+e.link.url+'</label><input class="note-link-url form-control span12" type="text" /></div>'+(t.disableLinkTarget?"":'<div class="checkbox"><label><input type="checkbox" checked> '+e.link.openInNewWindow+"</label></div>"),o='<button href="#" class="btn btn-primary note-link-btn disabled" disabled>'+e.link.insert+"</button>";return a("note-link-dialog",e.link.insert,n,o)},help:function(e,t){var n='<a class="modal-close pull-right" aria-hidden="true" tabindex="-1">'+e.shortcut.close+'</a><div class="title">'+e.shortcut.shortcuts+"</div>"+(i.isMac?v(e,t):b(v(e,t)))+'<p class="text-center"><a href="//summernote.org/" target="_blank">Summernote 0.6.4</a> · <a href="//github.com/summernote/summernote" target="_blank">Project</a> · <a href="//github.com/summernote/summernote/issues" target="_blank">Issues</a></p>';return a("note-help-dialog","",n,"")}},C=function(t,n){var o="";return e.each(y,function(e,i){o+=i(t,n)}),'<div class="note-dialog">'+o+"</div>"},x=function(){return'<div class="note-resizebar"><div class="note-icon-bar"></div><div class="note-icon-bar"></div><div class="note-icon-bar"></div></div>'},k=function(e){return i.isMac&&(e=e.replace("CMD","⌘").replace("SHIFT","⇧")),e.replace("BACKSLASH","\\").replace("SLASH","/").replace("LEFTBRACKET","[").replace("RIGHTBRACKET","]")},w=function(t,n,o){var i=r.invertObject(n),a=t.find("button");a.each(function(t,n){var o=e(n),r=i[o.data("event")];r&&o.attr("title",function(e,t){return t+" ("+k(r)+")"})}).tooltip({container:"body",trigger:"hover",placement:o||"top"}).on("click",function(){e(this).tooltip("hide")})},N=function(t,n){var o=n.colors;t.find(".note-color-palette").each(function(){for(var t=e(this),n=t.attr("data-target-event"),i=[],r=0,a=o.length;a>r;r++){for(var l=o[r],s=[],d=0,c=l.length;c>d;d++){var u=l[d];s.push(['<button type="button" class="note-color-btn" style="background-color:',u,';" data-event="',n,'" data-value="',u,'" title="',u,'" data-toggle="button" tabindex="-1"></button>'].join(""))}i.push('<div class="note-color-row">'+s.join("")+"</div>")}t.html(i.join(""))})};this.createLayoutByAirMode=function(t,n){var o=n.langInfo,a=n.keyMap[i.isMac?"mac":"pc"],l=r.uniqueId();t.addClass("note-air-editor note-editable"),t.attr({id:"note-editor-"+l,contentEditable:!0});var d=document.body,u=e(s(o,n));u.addClass("note-air-layout"),u.attr("id","note-popover-"+l),u.appendTo(d),w(u,a),N(u,n);var f=e(c());f.addClass("note-air-layout"),f.attr("id","note-handle-"+l),f.appendTo(d);var p=e(C(o,n));p.addClass("note-air-layout"),
p.attr("id","note-dialog-"+l),p.find("button.close, a.modal-close").click(function(){e(this).closest(".modal").modal("hide")}),p.appendTo(d)},this.createLayoutByFrame=function(t,n){var o=n.langInfo,r=e('<div class="note-editor"></div>');n.width&&r.width(n.width),n.height>0&&e('<div class="note-statusbar">'+(n.disableResizeEditor?"":x())+"</div>").prependTo(r);var a=!t.is(":disabled"),u=e('<div class="note-editable" contentEditable="'+a+'"></div>').prependTo(r);n.height&&u.height(n.height),n.direction&&u.attr("dir",n.direction);var f=t.attr("placeholder")||n.placeholder;f&&u.attr("data-placeholder",f),u.html(d.html(t)),e('<textarea class="note-codable"></textarea>').prependTo(r);for(var p=e('<div class="note-toolbar btn-toolbar" />'),h=0,m=n.toolbar.length;m>h;h++){for(var g=n.toolbar[h][0],v=n.toolbar[h][1],b=e('<div class="note-'+g+' btn-group" />'),y=0,k=v.length;k>y;y++){var E=l[v[y]];if(e.isFunction(E)){var S=e(E(o,n));S.attr("data-name",v[y]),b.append(S)}}p.append(b)}p.prependTo(r);var T=n.keyMap[i.isMac?"mac":"pc"];N(p,n),w(p,T,"bottom");var $=e(s(o,n)).prependTo(r);N($,n),w($,T),e(c()).prependTo(r);var D=e(C(o,n)).prependTo(r);D.find("button.close, a.modal-close").click(function(){e(this).closest(".modal").modal("hide")}),e('<div class="note-dropzone"><div class="note-dropzone-message"></div></div>').prependTo(r),r.insertAfter(t),t.hide()},this.hasNoteEditor=function(e){return this.noteEditorFromHolder(e).length>0},this.noteEditorFromHolder=function(t){return t.hasClass("note-air-editor")?t:t.next().hasClass("note-editor")?t.next():e()},this.createLayout=function(e,t){t.airMode?this.createLayoutByAirMode(e,t):this.createLayoutByFrame(e,t)},this.layoutInfoFromHolder=function(e){var t=this.noteEditorFromHolder(e);return t.length?(t.data("holder",e),d.buildLayoutInfo(t)):void 0},this.removeLayout=function(e,t,n){n.airMode?(e.removeClass("note-air-editor note-editable").removeAttr("id contentEditable"),t.popover().remove(),t.handle().remove(),t.dialog().remove()):(e.html(t.editable().html()),t.editor().remove(),e.show())},this.getTemplate=function(){return{button:t,iconButton:n,dialog:a}},this.addButtonInfo=function(e,t){l[e]=t},this.addDialogInfo=function(e,t){y[e]=t}};e.summernote=e.summernote||{},e.extend(e.summernote,u);var O=new L,P=new F;e.extend(e.summernote,{renderer:O,eventHandler:P,core:{agent:i,dom:d,range:c},pluginEvents:{},plugins:[]}),e.summernote.addPlugin=function(t){e.summernote.plugins.push(t),t.buttons&&e.each(t.buttons,function(e,t){O.addButtonInfo(e,t)}),t.dialogs&&e.each(t.dialogs,function(e,t){O.addDialogInfo(e,t)}),t.events&&e.each(t.events,function(t,n){e.summernote.pluginEvents[t]=n}),t.langs&&e.each(t.langs,function(t,n){e.summernote.lang[t]&&e.extend(e.summernote.lang[t],n)}),t.options&&e.extend(e.summernote.options,t.options)},e.fn.extend({summernote:function(){var t=e.type(a.head(arguments)),n="string"===t,o="object"===t,i=o?a.head(arguments):{};i=e.extend({},e.summernote.options,i),i.langInfo=e.extend(!0,{},e.summernote.lang["en-US"],e.summernote.lang[i.lang]),this.each(function(t,n){var o=e(n);if(!O.hasNoteEditor(o)){O.createLayout(o,i);var r=O.layoutInfoFromHolder(o);P.attach(r,i),P.attachCustomEvent(r,i)}}),!n&&this.length&&i.oninit&&i.oninit();var r=this.first();if(r.length){var l=O.layoutInfoFromHolder(r);if(n){var s=a.head(a.from(arguments)),d=a.tail(a.from(arguments)),c=[s,l.editable()].concat(d);return P.invoke.apply(P,c)}i.focus&&l.editable().focus()}return this},code:function(t){if(void 0===t){var n=this.first();if(!n.length)return;var o=O.layoutInfoFromHolder(n),i=o&&o.editable();if(i&&i.length){var r=P.invoke("codeview.isActivated",o);return P.invoke("codeview.sync",o),r?o.codable().val():o.editable().html()}return d.isTextarea(n[0])?n.val():n.html()}return this.each(function(n,o){var i=O.layoutInfoFromHolder(e(o)),r=i&&i.editable();r&&r.html(t)}),this},destroy:function(){return this.each(function(t,n){var o=e(n);if(O.hasNoteEditor(o)){var i=O.layoutInfoFromHolder(o),r=i.editor().data("options");P.detach(i,r),O.removeLayout(o,i,r)}}),this}})});
